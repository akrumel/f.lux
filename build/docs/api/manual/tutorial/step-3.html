<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">Tutorial</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container manual-root" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/akrumel/f.lux" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="overview">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-overview" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html" data-ice="link">f.lux Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#what-is-f-lux" data-ice="link">What is f.lux</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#high-level-feature-list" data-ice="link">High-level feature list</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#single-store" data-ice="link">Single store</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#co-locate-state-and-action-functions" data-ice="link">Co-locate state and action functions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#immutable-state" data-ice="link">Immutable state</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#property-life-cycle" data-ice="link">Property life-cycle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#collections-remote-data-" data-ice="link">Collections (remote data)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#logging-and-time-travel-debugger" data-ice="link">Logging and time travel debugger</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#-react-ui-" data-ice="link">react-ui</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-overview" data-section-count="&#x25A0;" data-link="manual/overview/concepts.html"><a href="manual/overview/concepts.html" data-ice="link">F.lux Concepts</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="tutorial">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/README.html"><a href="manual/tutorial/README.html#tutorial" data-ice="link">Tutorial</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html" data-ice="link">Step 0 - Boilerplate Review</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#setup" data-ice="link">Setup</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#the-user-interface" data-ice="link">The User Interface</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#files" data-ice="link">Files</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#-main-js-" data-ice="link">main.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#-todos-react-js-" data-ice="link">Todos.react.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#-addtodo-react-js-" data-ice="link">AddTodo.react.js</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html" data-ice="link">Step 1: F.lux Store and Basic Todo Functionality</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#1-create-a-f-lux-store-with-initial-state-a-name-store-" data-ice="link">1. Create a f.lux Store with initial state</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#2-subscribe-to-store-changes-in-todos-a-name-changes-" data-ice="link">2. Subscribe to store changes in &lt;Todos&gt;</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#3-implement-addtodo-addtodo-function-a-name-addtodo-" data-ice="link">3. Implement &lt;AddTodo&gt; addTodo() function</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#4-implement-todoitem-to-display-edit-and-delete-todo-items-a-name-items-" data-ice="link">4. Implement &lt;TodoItem&gt; to display, edit, and delete todo items</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#5-iterate-all-store-todo-items-and-create-a-todoitem-for-each-one-a-name-iterate-" data-ice="link">5. Iterate all store todo items and create a &lt;TodoItem&gt; for each one</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html" data-ice="link">Step 2: Properties</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#built-in-property-classes" data-ice="link">Built-in Property classes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-property-features" data-ice="link">Property features</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#creating-a-shadow-" data-ice="link">Creating a Shadow</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#custom-properties" data-ice="link">Custom properties</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#configuring-the-type-static-variable" data-ice="link">Configuring the type static variable</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#accessing-the-property-from-the-shadow-" data-ice="link">Accessing the Property from the Shadow</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#1-todo-property-a-id-todo-" data-ice="link">1. Todo property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#import-f-lux-types-and-moment-" data-ice="link">Import f.lux types and moment</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todoproperty-class" data-ice="link">Create the TodoProperty class</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todoshadow-class" data-ice="link">Create the TodoShadow class</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#define-todoproperty-type-" data-ice="link">Define TodoProperty.type</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#the-code" data-ice="link">The code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#2-todo-list-property-a-id-todos-" data-ice="link">2. Todo list property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todolistshadow-" data-ice="link">Create the TodoListShadow</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todolistproperty-" data-ice="link">Create the TodoListProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#the-code" data-ice="link">The code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#3-create-root-property-a-id-root-" data-ice="link">3. Create root property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-todorootproperty-" data-ice="link">Create TodoRootProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-store-using-todorootproperty-" data-ice="link">Create the Store using TodoRootProperty</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#4-update-ui-to-use-todolistproperty-and-todoproperty-a-id-ui-" data-ice="link">4. Update UI to use TodoListProperty and TodoProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-todos-react-js-" data-ice="link">Todos.react.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-addtodo-react-js-" data-ice="link">AddTodo.react.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-todoitem-react-js-" data-ice="link">TodoItem.react.js</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#5-track-todo-item-update-time-a-id-update-" data-ice="link">5. Track todo item update time</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#the-code" data-ice="link">The code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html" data-ice="link">Step 3: UI State</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#property-accessor-" data-ice="link">Property accessor ($())</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#property-initial-state" data-ice="link">Property initial state</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#1-uiproperty-a-id-uiproperty-" data-ice="link">1. UiProperty </a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#filters-and-sorters" data-ice="link">Filters and sorters</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#-uiproperty-definition" data-ice="link">UiProperty definition</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#2-update-toodrootproperty-a-id-root-" data-ice="link">2. Update ToodRootProperty </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#3-filterselector-and-sortselector-a-id-selectors-" data-ice="link">3. &lt;FilterSelector&gt; and &lt;SortSelector&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#4-update-todos-a-id-todos-" data-ice="link">4. Update &lt;Todos&gt; </a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#render-the-toolbar" data-ice="link">Render the toolbar</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#update-rendertodos-" data-ice="link">Update renderTodos()</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html" data-ice="link">Step 4: f.lux-react</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#-f-lux-react-" data-ice="link">f.lux-react</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#1-provider-a-id-provider-" data-ice="link">1. &lt;Provider&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#2-addtodo-a-id-addtodo-" data-ice="link">2. &lt;AddTodo&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#3-simplify-todos-top-level-component-a-id-todos-" data-ice="link">3. Simplify &lt;Todos&gt; Top-Level Component </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#4-header-a-id-header-" data-ice="link">4. &lt;Header&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#5-todoslist-a-id-todolist-" data-ice="link">5. &lt;TodosList&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#6-toolbar-a-id-toolbar-" data-ice="link">6. &lt;Toolbar&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html" data-ice="link">Step 5: Time Travel Debugger</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#1-setting-up-the-f-lux-logger-a-id-logger-" data-ice="link">1. Setting up the f.lux Logger </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#2-logging-a-id-logging-" data-ice="link">2. Logging </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#3-time-travel-a-id-timetravel-" data-ice="link">3. Time travel </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#4-fun-with-shadow-properties-a-id-fun-" data-ice="link">4. Fun with shadow properties </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-reference" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="identifiers.html"><a href="identifiers.html" data-ice="link">Reference</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#class" data-ice="link">Class</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#function" data-ice="link">Function</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#variable" data-ice="link">Variable</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="changelog">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-changelog" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html" data-ice="link">v1.0.0 Change Log</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#documentation" data-ice="link">Documentation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#changes" data-ice="link">Changes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#libraries" data-ice="link">Libraries</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#arrayproperty" data-ice="link">ArrayProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#indexedproperty" data-ice="link">IndexedProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#indexedshadowimpl" data-ice="link">IndexedShadowImpl</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#mapproperty" data-ice="link">MapProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#objectproperty" data-ice="link">ObjectProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#property" data-ice="link">Property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#propertyfactoryshader" data-ice="link">PropertyFactoryShader</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#shader" data-ice="link">Shader</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#statetype" data-ice="link">StateType</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#shadowimpl" data-ice="link">ShadowImpl</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#createpropertyclass-" data-ice="link">createPropertyClass()</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#examples" data-ice="link">Examples</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-breadcrumb-list">
    <a href="./manual/./index.html">Manual</a>
    <span>&#xBB;</span>
    <span data-ice="title">Tutorial</span>
  </div>
  <div data-ice="content"><h1 id="step-3-ui-state">Step 3: UI State</h1>
<h2 id="overview">Overview</h2>
<p>This step will implement a toolbar for filtering and sorting the todo items. The application state will be extended to include UI state for the desired functionality. </p>
<p>Here is an application screenshot containing the toolbar: </p>
<hr>
<p><img src="./manual/assets/step-3-screenshot.png" alt="Step 3 Screenshot"></p>
<hr>
<h2 id="goals">Goals</h2>
<ol>
<li><a href="#user-content-uiproperty"><code>UiProperty</code></a></li>
<li><a href="#user-content-root">Update <code>ToodRootProperty</code></a></li>
<li><a href="#user-content-selectors"><code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code></a></li>
<li><a href="#user-content-todos">Update <code>&lt;Todos&gt;</code></a></li>
</ol>
<p>The <a href="https://github.com/akrumel/f.lux/tree/master/examples/tutorial/step-3"><code>examples/tutorial/step-3</code></a> directory contains the completed code for this step.</p>
<h2 id="technical-background">Technical background</h2>
<h3 id="property-accessor-">Property accessor (<code>$()</code>)</h3>
<p>Each shadow state property has a <code>$()</code> method for accessing the <em>property accessor.</em> The property accessor was used to generate a React component key in the previous steps:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">todos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );</code>
</code></pre>
<p>The accessor contains methods for obtaining f.lux related information. The most commonly used property accessor methods include: </p>
<ul>
<li><code>dotPath()</code> - gets the path from the root shadow state to the referenced shadow state property. For example, a complex path could be <code>foo.bar.baz</code>.</li>
<li><code>latest()</code> - get a reference to the current shadow state property. Useful when an asynchronous call returns and the state may have been updated.</li>
<li><code>pid()</code> - gets the unqiue property id</li>
<li><code>rootShadow()</code> - gets the <code>Store</code> managed root shadow state object</li>
<li><code>state()</code> - gets the <code>Store</code> managed actual state (not the shadow state)</li>
<li><code>store()</code> - gets the <code>Store</code> containing the shadow state property</li>
</ul>
<p>This tutorial step will use the <code>$().rootShadow()</code> method.</p>
<h3 id="property-initial-state">Property initial state</h3>
<p>The <a href="./manual/step-2.md">previous step</a> initialized the <code>Store</code> with the following two lines:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const root = new TodoRootProperty();
const store = new Store(root);</code>
</code></pre>
<p>And was explained as:</p>
<blockquote>
<p>The <code>Store</code> obtains it from the <code>TodoRootProperty</code> instance passed into the constructor with the line:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">state = root.initialState();</code>
</code></pre>
<p><code>initialState()</code> is a <code>Property</code> method and it uses <code>TodoRootProperty.type</code> to calculate it.</p>
</blockquote>
<p>The initial state is computed recusively from the root until all descendents are non-objects, such as <code>null</code>, <code>undefined</code>, or a primitive. The initial state was implicitly set in the <code>createClass()</code> and <code>defineType()</code> static function calls. The third parameter to these static functions is the initial state, which receives an appropriate default if one is not explicitly passed. For example, here are the complete signatures for <code>ObjectProperty</code> static functions:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">static createClass(shadowType={}, specCallback, initialState={})

static defineType(PropClass, ShadowType, specCallback, initialState={})</code>
</code></pre>
<p>Notice the initial state defaults to the empty object (<code>{}</code>).</p>
<p>Here is a table with the default initial states for each type:</p>
<table>
<thead>
<tr>
<th><code>Property</code> class</th>
<th>default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ArrayProperty</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>IndexedProperty</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>MapProperty</code></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>ObjectProperty</code></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>PrimitiveProperty</code></td>
<td>N/A</td>
</tr>
</tbody>
</table>
<p>The previous step&apos;s initial state was:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">{ todos: [] }</code>
</code></pre>
<h2 id="1-uiproperty-a-id-uiproperty-">1. <code>UiProperty</code> <a id="uiproperty"></a></h2>
<p>The <code>UiProperty</code> requires the following properties and method:</p>
<ul>
<li><p><code>filter</code> - one of the following values where the values in parenthesis is the constant value defined in the <code>UiProperty.js</code> source file:</p>
<ul>
<li><code>all</code> - shows all items (<code>AllFilter</code>) </li>
<li><code>completed</code> - shows completed items only (<code>CompletedFilter</code>)</li>
<li><code>incomplete</code> - hides completed items (<code>IncompleteFilter</code>)</li>
</ul>
</li>
<li><p><code>sortBy</code> - one of the following values where the values in parenthesis is the constant value defined in the <code>UiProperty.js</code> source file:</p>
<ul>
<li><code>created</code> - oldest messages at the top (<code>CreatedSort</code>)</li>
<li><code>desc</code> - sorted in ascending alphabetical order (<code>DescSort</code>)</li>
<li><code>updated</code> - most recently modified/created items first (<code>UpdatedSort</code>)</li>
</ul>
</li>
<li><p><code>visibleTodos()</code> - returns the <code>todos</code> items that meet the chosen <code>filter</code> and sorted according to the <code>sortBy</code> algorithm.</p>
</li>
</ul>
<h3 id="filters-and-sorters">Filters and sorters</h3>
<p>This section involves filtering and sorting setup and is not related to f.lux. The <code>UiProperty.js</code> file exports constants for the filtering and sorting algorithms and the sets up the algorithm functions</p>
<pre><code class="lang-js"><code class="source-code prettyprint">export const AllFilter = &quot;all&quot;;
export const CompletedFilter = &quot;completed&quot;;
export const IncompleteFilter = &quot;incomplete&quot;;
const DefaultFilter = AllFilter;

export const CreatedSort = &quot;created&quot;;
export const DescSort = &quot;desc&quot;;
export const UpdatedSort = &quot;updated&quot;;
const DefaultSort = CreatedSort;

/*
    Filter functions available for easy lookup.
*/
const filters = {
    [AllFilter]: t =&gt; true,
    [CompletedFilter]: t =&gt; t.completed,
    [IncompleteFilter]: t =&gt; !t.completed,
};

/*
    Sort functions available for easy lookup. Each function is setup to return incomplete items
    before completed items.
*/
const sorters = {
    [CreatedSort]: (t1, t2) =&gt; t1.completed == t2.completed ?t1.momentCreated - t2.momentCreated :t1.completed,
    [DescSort]: (t1, t2) =&gt; t1.completed == t2.completed ?t1.desc.localeCompare(t2.desc) :t1.completed,
    [UpdatedSort]: (t1, t2) =&gt; t1.completed == t2.completed ?t2.momentUpdated - t1.momentUpdated :t1.completed,
}</code>
</code></pre>
<p>Notice how the sorting functions sort incomplete items first followed by the selected algorithm.</p>
<h3 id="-uiproperty-definition"><code>UiProperty</code> definition</h3>
<p><code>UiProperty</code> is an <code>ObjectProperty</code> with a <code>Shadow</code> subclass as the shadow api. The <code>UiProperty</code> class is not explicitly defined since the f.lux property life-cycle is not required.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">class UiShadow extends Shadow {
    visibleTodos() {
        const { todos } = this.$().rootShadow();
        const { filter, sortBy } = this;
        const filterFn = filters[filter] || filters[DefaultFilter];
        const sortFn = sorters[sortBy] || sorters[DefaultSort];

        return todos.filter(filterFn).sort(sortFn);
    }
}


export default ObjectProperty.createClass(UiShadow, type =&gt; {
    type.properties({
                filter: PrimitiveProperty.type.initialState(DefaultFilter),
                sortBy: PrimitiveProperty.type.initialState(DefaultSort)
            })
        .readonlyOff
        .typeName(&quot;UiProperty&quot;);
});</code>
</code></pre>
<ul>
<li><p><code>this.$().rootShadow()</code></p>
<p>  The React UI uses the <code>UiShadow.visibleTodos()</code> method to retrieve the filtered and sorted todo items for rendering. The key f.lux related code is the <code>$().rootShadow()</code> call. This returns the <code>Store</code> managed shadow property of type <code>RootTodoProperty</code> defined in the <a href="./manual/step-2.md">previous step</a>. We then get the <code>todos</code> shadow state property and call the array methods <code>filter()</code> and <code>sort()</code>:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  const { todos } = this.$().rootShadow();

  return todos.filter(filterFn).sort(sortFn);</code>
</code></pre>
</li>
<li><p><code>const { filter, sortBy } = this</code></p>
<p>  A <code>Shadow</code> method&apos;s <code>this</code> reference points to the shadow state. We use <code>this</code> to get the <code>filter</code> and <code>sortBy</code> shadow property values, which will be native javascript strings since they are both defined using <code>PrimitiveProperty.type</code> and are initialized using string values. The <code>filter</code> and <code>sortBy</code> string values are used to lookup the appropriate callback functions:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  const filterFn = filters[filter] || filters[DefaultFilter];
  const sortFn = sorters[sortBy] || sorters[DefaultSort];

  return todos.filter(filterFn).sort(sortFn);</code>
</code></pre>
</li>
<li><p>Property initial state</p>
<p>  The <code>filter</code> and <code>sortBy</code> properties are assigned initial values using in the <code>type</code> setup callback:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  type.properties({
          filter: PrimitiveProperty.type.initialState(DefaultFilter),
          sortBy: PrimitiveProperty.type.initialState(DefaultSort)
      })</code>
</code></pre>
<p>  We will see how the initial values look in the next section.</p>
</li>
</ul>
<h2 id="2-update-toodrootproperty-a-id-root-">2. Update <code>ToodRootProperty</code> <a id="root"></a></h2>
<p>The <code>UiProperty</code> is accessed via the <code>ui</code> property off the root shadow state:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">export default ObjectProperty.createClass({}, type =&gt; {
    type.autoshadowOff                          
        .properties({
                todos: TodoListProperty.type,
                ui: UiProperty.type,             // add UiProperty to state
            })
        .readonly                               
        .typeName(&quot;TodoRootProperty&quot;);          
});</code>
</code></pre>
<p>And now the <code>Store</code> initial state is:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">{
    todos: [],
    ui: {
        filter: &quot;all&quot;,
        sortBy: &quot;created&quot;
    }
}</code>
</code></pre>
<h2 id="3-filterselector-and-sortselector-a-id-selectors-">3. <code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code> <a id="selectors"></a></h2>
<p>Both components are idiomatically the same so this section will focus on just one, <code>&lt;FilterSelector&gt;</code>:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">import React from &quot;react&quot;;
import { AllFilter, CompletedFilter, IncompleteFilter } from &quot;./UiProperty&quot;;

export default function FilterSelector(props, context) {
    const { ui } = props;

    return &lt;div className=&quot;tools-selector&quot;&gt;
            &lt;span&gt;Filter:&lt;/span&gt;

            &lt;select onChange={ e =&gt; ui.filter = e.target.value }&gt;
                &lt;option value={ AllFilter }&gt;All&lt;/option&gt;
                &lt;option value={ CompletedFilter }&gt;Completed&lt;/option&gt;
                &lt;option value={ IncompleteFilter }&gt;Not Completed&lt;/option&gt;
            &lt;/select&gt;
        &lt;/div&gt;
}</code>
</code></pre>
<p>A few points worth calling out:</p>
<ul>
<li><p><code>import { AllFilter, CompletedFilter, IncompleteFilter } from &quot;./UiProperty&quot;;</code></p>
<p>  This demonstrates how f.lux introduces a natural organization to an application&apos;s structure without explicitly imposing one. Defining and exporting the filter and sorting constants from the <code>UiProperty</code> module just feels right (to me at least).</p>
</li>
</ul>
<ul>
<li><p><code>&lt;select onChange={ e =&gt; ui.filter = e.target.value } &gt;</code></p>
<p>  The <code>ui</code> property is the <code>UiProperty</code> shadow state property and we will see how this is obtained in the next section.</p>
<p>  Updating the <code>ui.filter</code> property uses a simple assignment in the <code>onChange()</code> event callback. The assignment will trigger an f.lux property update action followed by a store update notification to registered listeners, the <code>&lt;Todos&gt;</code> component in this application.</p>
<p>  That&apos;s it!</p>
</li>
</ul>
<h2 id="4-update-todos-a-id-todos-">4. Update <code>&lt;Todos&gt;</code> <a id="todos"></a></h2>
<p>Finally, let&apos;s update the <code>&lt;Todos&gt;</code> component to show the toolbar and utilize the <code>UiProperty.visibleTodos()</code> method to get the filtered and sorted items:</p>
<h3 id="render-the-toolbar">Render the toolbar</h3>
<p>Here is the <code>render()</code> function:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">render() {
    const { todos, ui } = this.props.store._;
    const remainingText = `${ todos.incompleteSize } ${ pluralize(&quot;item&quot;, todos.incompleteSize ) } remaining`;

    return &lt;div className=&quot;todoContainer&quot;&gt;
            &lt;h1&gt;
                F.lux Todos &lt;small&gt;{ remainingText }&lt;/small&gt;
            &lt;/h1&gt;

            &lt;AddTodo todos={ todos } /&gt;

            { this.renderTodos() }

            &lt;div className=&quot;tools&quot;&gt;
                &lt;FilterSelector ui={ ui } /&gt;
                &lt;SortSelector ui={ ui } /&gt;
            &lt;/div&gt;
        &lt;/div&gt;
}</code>
</code></pre>
<p>And here are the interesting additions:</p>
<ul>
<li><p><code>const { todos, ui } = this.props.store._;</code></p>
<p>  The <code>ui</code> property is stored in the root shadow state.</p>
</li>
<li><p>The toolbar</p>
<p>  Just a bit of JSX that passes the <code>ui</code> shadow state property to the <code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code> components:</p>
<pre><code class="lang-jsx"><code class="source-code prettyprint">  &lt;div className=&quot;tools&quot;&gt;
      &lt;FilterSelector ui={ ui } /&gt;
      &lt;SortSelector ui={ ui } /&gt;
  &lt;/div&gt;</code>
</code></pre>
</li>
</ul>
<h3 id="update-rendertodos-">Update <code>renderTodos()</code></h3>
<p>Filtering introduces a few additional requirements:</p>
<ul>
<li><strong>No visible items</strong> - the list may contain items that do not satisfy the current filter criteria, ie no completed items.</li>
<li><strong>Display properly sorted and filtered items</strong> - this is simple with our new <code>UiProperty.visibleTodos()</code> shadow method.</li>
</ul>
<p>And here is the updated <code>renderTodos()</code> function:</p>
<pre><code class="lang-jsx"><code class="source-code prettyprint">renderTodos() {
    const { todos, ui } = this.props.store._;
    const visibleTodos = ui.visibleTodos();

    if (visibleTodos.length) {
        return visibleTodos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );
    } else if (todos.length === 0) {
        return &lt;p className=&quot;noItems&quot;&gt;What do you want to do today?&lt;/p&gt;
    } else {
        return &lt;p className=&quot;noItems&quot;&gt;No items are { ui.filter }&lt;/p&gt;
    }
}</code>
</code></pre>
<p>And a few points explained:</p>
<ul>
<li><p><code>const visibleTodos = ui.visibleTodos();</code></p>
<p>  The previous step simply used the <code>todos</code> array shadow property directly and employed some inline sorting. The filtering and sorting is delegated to the <code>UiProperty</code> which maintains the filter and sorting criteria.</p>
</li>
<li><p><code>visibleTodos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );</code>    </p>
<p>   The <code>visibleTodos</code> is mapped but each <code>&lt;TodoItem&gt;</code>. But notice the component&apos;s <code>todos</code> property:</p>
<pre><code class="lang-jsx"><code class="source-code prettyprint">   &lt;TodoItem ... todos={ todos } /&gt;</code>
</code></pre>
<p>   We still pass the <code>todos</code> array shadow property because the component needs access to the actual shadow state array for deleting the time when the &apos;x&apos; icon is pressed. The <code>ui.visibleTodos()</code> return value is a native array so will be of no use for removing an item from the store&apos;s state. This trickiness will be banished by using the <code>f.lux-react</code> module in <a href="./manual/step-4.md">next step</a>.</p>
</li>
</ul>
<h2 id="final-thoughts">Final Thoughts</h2>
<p>This tutorial step covered using the f.lux shadow state for maintaining user interface state. </p>
<p>Important concepts covered include:</p>
<ul>
<li>Using <code>$().rootShadow()</code> property accessor method to access the <code>Store</code> managed root shadow object.</li>
<li>Employ f.lux state to maintain user interface state and extract data manipulation logic.</li>
</ul>
<h2 id="next-step">Next Step</h2>
<p><a href="./manual/step-4.md">Step 4: <code>f.lux-react</code></a></p>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
