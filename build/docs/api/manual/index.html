<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../">
  <title data-ice="title">Manual</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container manual-root manual-index" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/akrumel/f.lux" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual" data-toc-name="overview">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-overview" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html" data-ice="link">f.lux Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#what-is-f-lux" data-ice="link">What is f.lux</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#high-level-feature-list" data-ice="link">High-level feature list</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#single-store" data-ice="link">Single store</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#co-locate-state-and-action-functions" data-ice="link">Co-locate state and action functions</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#immutable-state" data-ice="link">Immutable state</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#property-life-cycle" data-ice="link">Property life-cycle</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#collections-remote-data-" data-ice="link">Collections (remote data)</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#logging-and-time-travel-debugger" data-ice="link">Logging and time travel debugger</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/overview/overview.html"><a href="manual/overview/overview.html#-react-ui-" data-ice="link">react-ui</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-overview" data-section-count="&#x25A0;" data-link="manual/overview/concepts.html"><a href="manual/overview/concepts.html" data-ice="link">F.lux Concepts</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="tutorial">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/README.html"><a href="manual/tutorial/README.html#tutorial" data-ice="link">Tutorial</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html" data-ice="link">Step 0 - Boilerplate Review</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#setup" data-ice="link">Setup</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#the-user-interface" data-ice="link">The User Interface</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#files" data-ice="link">Files</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#-main-js-" data-ice="link">main.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#-todos-react-js-" data-ice="link">Todos.react.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#-addtodo-react-js-" data-ice="link">AddTodo.react.js</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-0.html"><a href="manual/tutorial/step-0.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html" data-ice="link">Step 1: F.lux Store and Basic Todo Functionality</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#1-create-a-f-lux-store-with-initial-state-a-name-store-" data-ice="link">1. Create a f.lux Store with initial state</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#2-subscribe-to-store-changes-in-todos-a-name-changes-" data-ice="link">2. Subscribe to store changes in &lt;Todos&gt;</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#3-implement-addtodo-addtodo-function-a-name-addtodo-" data-ice="link">3. Implement &lt;AddTodo&gt; addTodo() function</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#4-implement-todoitem-to-display-edit-and-delete-todo-items-a-name-items-" data-ice="link">4. Implement &lt;TodoItem&gt; to display, edit, and delete todo items</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-1.html"><a href="manual/tutorial/step-1.html#5-iterate-all-store-todo-items-and-create-a-todoitem-for-each-one-a-name-iterate-" data-ice="link">5. Iterate all store todo items and create a &lt;TodoItem&gt; for each one</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html" data-ice="link">Step 2: Properties</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#built-in-property-classes" data-ice="link">Built-in Property classes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-property-features" data-ice="link">Property features</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#creating-a-shadow-" data-ice="link">Creating a Shadow</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#custom-properties" data-ice="link">Custom properties</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#configuring-the-type-static-variable" data-ice="link">Configuring the type static variable</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#accessing-the-property-from-the-shadow-" data-ice="link">Accessing the Property from the Shadow</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#1-todo-property-a-id-todo-" data-ice="link">1. Todo property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#import-f-lux-types-and-moment-" data-ice="link">Import f.lux types and moment</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todoproperty-class" data-ice="link">Create the TodoProperty class</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todoshadow-class" data-ice="link">Create the TodoShadow class</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#define-todoproperty-type-" data-ice="link">Define TodoProperty.type</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#the-code" data-ice="link">The code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#2-todo-list-property-a-id-todos-" data-ice="link">2. Todo list property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todolistshadow-" data-ice="link">Create the TodoListShadow</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-todolistproperty-" data-ice="link">Create the TodoListProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#the-code" data-ice="link">The code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#3-create-root-property-a-id-root-" data-ice="link">3. Create root property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-todorootproperty-" data-ice="link">Create TodoRootProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#create-the-store-using-todorootproperty-" data-ice="link">Create the Store using TodoRootProperty</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#4-update-ui-to-use-todolistproperty-and-todoproperty-a-id-ui-" data-ice="link">4. Update UI to use TodoListProperty and TodoProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-todos-react-js-" data-ice="link">Todos.react.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-addtodo-react-js-" data-ice="link">AddTodo.react.js</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#-todoitem-react-js-" data-ice="link">TodoItem.react.js</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#5-track-todo-item-update-time-a-id-update-" data-ice="link">5. Track todo item update time</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#the-code" data-ice="link">The code</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-2.html"><a href="manual/tutorial/step-2.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html" data-ice="link">Step 3: UI State</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#property-accessor-" data-ice="link">Property accessor ($())</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#property-initial-state" data-ice="link">Property initial state</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#1-uiproperty-a-id-uiproperty-" data-ice="link">1. UiProperty </a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#filters-and-sorters" data-ice="link">Filters and sorters</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#-uiproperty-definition" data-ice="link">UiProperty definition</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#2-update-toodrootproperty-a-id-root-" data-ice="link">2. Update ToodRootProperty </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#3-filterselector-and-sortselector-a-id-selectors-" data-ice="link">3. &lt;FilterSelector&gt; and &lt;SortSelector&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#4-update-todos-a-id-todos-" data-ice="link">4. Update &lt;Todos&gt; </a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#render-the-toolbar" data-ice="link">Render the toolbar</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#update-rendertodos-" data-ice="link">Update renderTodos()</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-3.html"><a href="manual/tutorial/step-3.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html" data-ice="link">Step 4: f.lux-react</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#technical-background" data-ice="link">Technical background</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#-f-lux-react-" data-ice="link">f.lux-react</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#1-provider-a-id-provider-" data-ice="link">1. &lt;Provider&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#2-addtodo-a-id-addtodo-" data-ice="link">2. &lt;AddTodo&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#3-simplify-todos-top-level-component-a-id-todos-" data-ice="link">3. Simplify &lt;Todos&gt; Top-Level Component </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#4-header-a-id-header-" data-ice="link">4. &lt;Header&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#5-todoslist-a-id-todolist-" data-ice="link">5. &lt;TodosList&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#6-toolbar-a-id-toolbar-" data-ice="link">6. &lt;Toolbar&gt; </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-4.html"><a href="manual/tutorial/step-4.html#next-step" data-ice="link">Next Step</a></li>
<li data-ice="manualNav" class="indent-h1 manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html" data-ice="link">Step 5: Time Travel Debugger</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#overview" data-ice="link">Overview</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#1-setting-up-the-f-lux-logger-a-id-logger-" data-ice="link">1. Setting up the f.lux Logger </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#2-logging-a-id-logging-" data-ice="link">2. Logging </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#3-time-travel-a-id-timetravel-" data-ice="link">3. Time travel </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#4-fun-with-shadow-properties-a-id-fun-" data-ice="link">4. Fun with shadow properties </a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/tutorial/step-5.html"><a href="manual/tutorial/step-5.html#final-thoughts" data-ice="link">Final Thoughts</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="reference">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-reference" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="identifiers.html"><a href="identifiers.html" data-ice="link">Reference</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#class" data-ice="link">Class</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#function" data-ice="link">Function</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="identifiers.html"><a href="identifiers.html#variable" data-ice="link">Variable</a></li>
</ul>
  </div>
<div data-ice="manual" data-toc-name="changelog">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1 manual-color manual-color-changelog" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html" data-ice="link">v1.0.0 Change Log</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#goals" data-ice="link">Goals</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#documentation" data-ice="link">Documentation</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#changes" data-ice="link">Changes</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#libraries" data-ice="link">Libraries</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#arrayproperty" data-ice="link">ArrayProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#indexedproperty" data-ice="link">IndexedProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#indexedshadowimpl" data-ice="link">IndexedShadowImpl</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#mapproperty" data-ice="link">MapProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#objectproperty" data-ice="link">ObjectProperty</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#property" data-ice="link">Property</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#propertyfactoryshader" data-ice="link">PropertyFactoryShader</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#shader" data-ice="link">Shader</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#statetype" data-ice="link">StateType</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#shadowimpl" data-ice="link">ShadowImpl</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#createpropertyclass-" data-ice="link">createPropertyClass()</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/changelog/v1.0.0.html"><a href="manual/changelog/v1.0.0.html#examples" data-ice="link">Examples</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  

  <p class="manual-badge" data-ice="manualBadge"><img src="./manual-badge.svg"></p>

  <div class="manual-cards">
    
  <div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-overview" data-section-count="&#x25A0;&#x25A0;&#x25A0;"><span data-ice="label-inner">f.lux Overview</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>f.lux Overview</h1><h2>What is f.lux</h2><p>f.lux is a data management library inspired by the <a href="https://facebook.github.io/flux/docs/overview.html">React flux architecture</a> and influenced by <a href="http://redux.js.org/">Redux</a> and <a href="https://facebook.github.io/immutable-js/">immutable.js</a>. This is third version of the f.lux approach and the first to be published open source. This version is actively used in commercial projects on both web and react-native platforms and really shines when implementing complex data-rich applications, such as enterprise, form-heavy, and complex business logic applications.</p><h2>High-level feature list</h2><h3>Single store</h3><p>All application state is stored in a single object tree as inspired by <a href="http://redux.js.org/docs/introduction/ThreePrinciples.html#single-source-of-truth">Redux&apos;s single store approach</a>. A single source of truth greatly simplifies application state management, reduces complexity, and eases debugging.</p><h3>Co-locate state and action functions</h3><p>The f.lux store efficiently virtualizes the state tree into a shadow state as inspired by the React shadow DOM. The virtualization process, called shadowing, binds action-type functions onto the state tree properties. Binding the functions with the data makes explicit the operations that may be performed on a state tree property. The virtualization process can also expose virtualized properties for the underlying data that when set using <code>=</code> generates an update action without having to write any code. The exposed properties may also be set to readonly and will ensure the value is not updated, handy for object IDs.</p><p>The virtualization process is central to the f.lux architecture and is designed to be simple for common cases while exposing a straight-forward, declarative mechanism to customize the process on a per property basis. The application works with shadow objects that are accessed just like traditional javascript objects. This means your application logic looks &quot;normal&quot; and you can interact and inspect state objects in the javascript console like regular objects. The shadow objects are immutable so interacting with them through property assignments and function invocation result in actions being dispatched to the store for in order processing. The store then generates a change event on the next tick for the application to process the new state.</p><p>To be explicit, the virtualization process is recursively applied to the entire state tree. For performance reasons, the process occurs on a just-in-time basis so only the accessed properties are virtualized.</p><h2>Immutable state</h2><p>All state changes occur indirectly through actions, usually through shadow object bound functions and properties.</p><p>Making changes through actions ensures changes happen in a strict order and store listeners receive a coherent and atomically updated state tree.</p><h2>Property life-cycle</h2><p>State tree properties have a life-cycle that analogous to the React component life-cycle.</p><p>The property life-cycle is:</p><ul>
<li><code>propertyWillShadow</code> - the state tree property is going to be virtualized</li>
<li><code>propertyDidShadow</code> - virtualization process completed</li>
<li><code>propertyWillUpdate</code> - an action updated the property&apos;s state resulting in a revirtualization of changed sub-properties</li>
<li><code>propertyDidUpdate</code> - revirtualization completed</li>
<li><code>propertyWillUnshadow</code> - property is being removed from the state tree</li>
</ul><p>The life-cycle motivating use case was integrating with state changes external to the application code. External state changes examples include:</p><ul>
<li>web socket messages - a property can register for web socket messages when shadowed and unregister upon unshdadowing. This puts the logic for how to handle the message colocated with the other functions associated with that state property making the application logic easier to reason about and debug.</li>
<li>push notifications - a dedicated state property can register for push notifications and store the associated information in a single location for the UI to process. Changes to the notification property will trigger a store change and provide a known state tree location to inspect. With a shadow function to <code>clear()</code> the notification the UI can remove the notification after performing any necessary UI update.</li>
<li>phone rotation - a property may be defined to specify the current orientation and registeer/unregiseter for native platform updates. The natively registered called can update a sub-property specifying the orientation causing a store change event allowing the UI components to update appropriately. Again, native callback and associated state are colocated in the shadow state tree.</li>
<li>application foreground/background changes - another example of registering with the native system to drive application state and update logic.</li>
</ul><p>The virtualization architecture divides a shadow property into two entities:</p><ul>
<li>shadow - the virtualized interface used by the application logic to inspect and modify the state tree.</li>
<li>property - analogous to a React component with a life-cycle (think of the shadow as the <code>render()</code> function though in the case it is an object). F.lux properties are implemented using ES2016 classes.</li>
</ul><p>Here is an example of a <code>react-native</code> orientation property:</p><pre><code><code class="source-code prettyprint">import Orientation from &quot;react-native-orientation&quot;;
import {
    ObjectProperty,
    PrimitiveProperty,
    Shadow,
    StateType,
} from &quot;f.lux&quot;;
import { shadow } from &quot;f.lux/lib/decorators&quot;;

import appDebug, { AppOrientationPropertyKey as DebugKey } from &quot;./debug&quot;;
const debug = appDebug(DebugKey);


export const LandscapeOrientation = &quot;LANDSCAPE&quot;;
export const PortraitOrientation = &quot;PORTRAIT&quot;;
export const UnknownOrientation = &quot;UNKNOWN&quot;;


export default class OrientationProperty extends ObjectProperty {
    propertyWillShadow() {
        // regiseter for orientation events (not showing removing orientation lister to shorten example)
        Orientation.addOrientationListener(orientation =&gt; this._onOrientationChange(orientation) );

        // get the current orientation (async op)
        Orientation.getOrientation( (err, orientation) =&gt; {
                if (err) {
                    debug(`getOrientation() error`, err);
                } else {
                    this._onOrientationChange(orientation);
                }
            });
    }

    _onOrientationChange(orientation) {
        if (orientation === UnknownOrientation) {
            return debug(`_onOrientationChange(): ignoring orientation update - orientation=${orientation}`);
        }

        // update the &apos;direction&apos; property with the new orientation
        this._keyed.set(&quot;direction&quot;, orientation);

        debug(`_onOrientationChange() orientation update: ${orientation}`);
    }
}</code>
</code></pre><p>The statement <code>this._keyed.set(&quot;direction&quot;, orientation)</code> demonstrates using the <code>ObjectProperty</code> class&apos; method to set/update read-only virtualized properties (code not shown declaring <code>direction</code> as readonly). Most of the time, however, you will interact with the shadow model using standard javascript techniques, assignment and functions/methods. The UI could access the <code>direction</code> property using</p><pre><code><code class="source-code prettyprint">import { LandscapeOrientation } from &quot;./OrientationProperty&quot;;

...

const { orientation } = store.shadow;

console.log(orientation.direction);

if (orientation.direction === LandscapeOrientation) {
    // do something specific to landscape mode here
} else {
    // do something portriat specific here
}</code>
</code></pre><p>The <code>direction</code> property would be an ideal candidate for being readonly so the application logic could not change it. The <code>OrientationProperty</code> could still change it using the line <code>this._keyed.set(&quot;direction&quot;, orientation);</code>. This is easy to accomplish though the mechanism is not shown here and is explored in the <a href="./manual/../tutorial/README.md">tutorial</a>.</p><p>Implementing properties is one of the few cases where f.lux utilizes inheritance, which feels natural since this is defining a new type. The f.lux approach is to avoid defining Property class hierarchies. A facility is provided for sharing functionality through mixins when the shared code needs to tie into the property life-cycle; a rarely needed but useful capability to have when desired.</p><h2>Collections (remote data)</h2><p>f.lux provides built-in support for working with remote data through the <code>Collection</code> property type.</p><p>The Collections api is inspired by the simple (Backbone)[] collections for performing CRUD operations on remote data. The data operations are implemented through an abstraction called an endpoint. F.lux ships with support for REST and local endpoints. The local endpoint is often used for stub data during development and testing. Custom endpoints have been written for Couchbase and GraphQL data sources.</p><p>Collections live in the virtualized state tree like any other property and store all information in the actual state tree making them time travel compatible.</p><h2>Logging and time travel debugger</h2><p>F.lux includes a logging facility and time travel debugger accessed through the javascript console.</p><p>Both facilities are exposed through a single console object. The <code>help</code> command lists the following:</p><pre><code><code class="source-code prettyprint">f.lux logger commands:
    back          - moves backward in time by one store state frame
    clear         - removes all logs
    forward       - moves forward in time by one store state frame
    help          - f.lux logger commands
    index         - active index of store state frames
    maxFrames     - # of store updates to cache (default=50)
    print         - print logs to console
    printNoState  - print logs to console without state objects
    size          - # of store state frames available
    store         - gets the f.lux store

Functions:
    clearTrap(name)                    - clears a trap set by &apos;setTrap()&apos;
    goto(idx)                          - move to a specific store state frame
    setMaxFrames(maxFrames)            - set the maximum number of store states to maintain (default=50)
    setTrap(cond, value, name=uuid)    - sets a debugger trap and returns name. Condition argument may be
                                         a function taking next state or a string path to get a value
    tail(count=10, printState=true)    - prints last &apos;count&apos; store updates


f.lux log available at window.flog</code>
</code></pre><p>The store api used for implementing the logger and time travel debugger can be utilized to implement alternative implementations.</p><h2><code>react-ui</code></h2><p>An add-on module providing React support for mapping store state to React component properties, collection mappings, and form components.</p></div>
        <a data-ice="link" href="manual/overview/overview.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-overview" data-section-count="&#x25A0;"><span data-ice="label-inner">F.lux Concepts</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>F.lux Concepts</h1></div>
        <a data-ice="link" href="manual/overview/concepts.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;"><span data-ice="label-inner">Step 0 - Boilerplate Review</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>Step 0 - Boilerplate Review</h1><p>The code in the <code>examples/tutorial/step-0</code> directory contains a React based UI for the Todo application without any real functionality.</p><h2>Setup</h2><p>Each step will use the same setup and run instruction as listed in each directory&apos;s README.md files. Here are the steps:</p><ol>
<li><p>Install webpack globally:</p>
<blockquote>
<p>npm install webpack -g</p>
</blockquote>
</li>
<li><p>Install dependencies:</p>
<blockquote>
<p>npm install</p>
</blockquote>
</li>
<li><p>Compile the javascript code:</p>
<blockquote>
<p>webpack</p>
</blockquote>
</li>
<li><p>Open the <code>public/index.html</code> in a web browser</p>
</li>
<li><p>To run using webpack hot reloader (not React Hot Reloader module)</p>
<ol>
<li>Start the webpack dev server: <code>npm start</code></li>
<li>Point browser to: <code>http://localhost:8080/</code></li>
</ol>
</li>
</ol><h2>The User Interface</h2><p>Performing these steps will display the starting point application:</p><p><img src="./manual/assets/step-0-screenshot.png" alt="Step-0 Screenshot"></p><h2>Files</h2><h3><code>main.js</code></h3><p>Loads the babel polyfill for es2015 support and renders the <code>&lt;Todos&gt;</code> component into the <code>index.html</code> file.</p><h3><code>Todos.react.js</code></h3><p>The top level UI component. The current version creates an <code>&lt;h1&gt;</code> title, displays the <code>&lt;AddTodo&gt;</code> component, and renders a notice that there are no Todo items.</p><h3><code>AddTodo.react.js</code></h3><p>Implements the <code>&lt;AddTodo&gt;</code> component that will create new Todo items after the next step. For now, it renders an input for the Todo description and an &apos;Add&apos; button. There is a stubbed method called <code>addTodo()</code> that will create a new Todo item after the next step.</p><h2>Next Step</h2><p>The next step in the tutorial will create an f.lux store and implement adding, editing, and deleting todo items.</p><p><a href="./manual/step-1.md">Step 1: Create a f.lux store and basic todo item functionality</a></p></div>
        <a data-ice="link" href="manual/tutorial/step-0.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;"><span data-ice="label-inner">Step 1: F.lux Store and Basic Todo Functionality</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>Step 1: F.lux Store and Basic Todo Functionality</h1><h2>Overview</h2><p>This step adds state to the application using the <strong>default f.lux <code>Store</code> behavior.</strong> Minimal work is required to create an f.lux shadow state to have a data flow based application using immutable data structures without losing the simplicity of natural javascript idioms.</p><h2>Goals</h2><ol>
<li><a href="#user-content-store">Create a f.lux <code>Store</code> with initial state</a></li>
<li><a href="#user-content-changes">Subscribe to store changes in <code>&lt;Todos&gt;</code></a></li>
<li><a href="#user-content-addtodo">Implement <code>&lt;AddTodo&gt;</code> <code>addTodo()</code> function</a></li>
<li><a href="#user-content-items">Implement <code>&lt;TodoItem&gt;</code> to display, edit, and delete todo items</a></li>
<li><a href="#user-content-iterate">Iterate all store todo items and create a <code>&lt;TodoItem&gt;</code> for each one</a></li>
</ol><p>The <a href="https://github.com/akrumel/f.lux/tree/master/examples/tutorial/step-1"><code>examples/tutorial/step-1</code></a> directory contains the completed code for this step.</p><h2>Technical background</h2><p>F.lux stores all application state in a single object tree. A single source of truth greatly simplifies application state management, reduces complexity, and eases debugging. The f.lux store efficiently virtualizes the state tree into a shadow state as inspired by the React shadow DOM. The virtualization process, called shadowing, binds action-type functions onto the state tree properties. Binding the functions with the data makes explicit the operations that may be performed on a state tree property. Shadowing is recursively applied to the entire state tree. For performance reasons, the process occurs on a just-in-time basis so only the accessed properties are virtualized.</p><p>F.lux uses the <code>Store</code> class for representing stores. The following image shows how the store exposes the root state and the root property. Inside the root property is its shadow, which contains a reference to the actual state.</p><p><img src="./manual/assets/f.lux-architecture.png" alt="F.lux Architecture"></p><p>The application works with shadow objects that are accessed just like traditional javascript objects. This means your application logic looks &quot;normal&quot; and you can interact and inspect state objects in the javascript console like regular objects. The shadow objects are immutable so interacting with them through property assignments and function invocation result in actions being dispatched to the store for in order processing. The store then generates a change event on the next tick for the application to process the new state.</p><p>The next image shows how a list of one todo item would be shadowed:</p><p><img src="./manual/assets/todo-shadow.png" alt="Shadowed Todos"></p><p>The types of properties are shown in dark gray box titles. Out of the box, f.lux will recursively &apos;autoshadow&apos; the state to automatically map <code>Property</code> subclasses onto the application state. The next step will cover specifying mapping instructions. Autoshadowing performs the following javascript type to f.lux type mapping:</p><table>
<thead>
<tr>
<th>Javascript type</th>
<th>f.lux <code>Property</code> subclass</th>
<th>API</th>
</tr>
</thead>
<tbody>
<tr>
<td>Array.isArray(type)</td>
<td><code>ArrayProperty</code></td>
<td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a></td>
</tr>
<tr>
<td>lodash.isPlainObject(type)</td>
<td><code>MapProperty</code></td>
<td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a></td>
</tr>
<tr>
<td>all others</td>
<td><code>PrimitiveProperty</code></td>
<td>exposes the actual value</td>
</tr>
</tbody>
</table><p>F.lux enables normal Javascript coding syntax to access and manipulate the shadow state in a <a href="https://facebook.github.io/flux/">Flux</a> compatible way. The shadow state is immutable so all mutations, whether through assignment or functions/methods will generate f.lux actions that will change the actual state and generate store change notifications to registered listeners. Some examples of code used and described in the following sections to get the concepts flowing:</p><ul>
<li><code>Array.map()</code></li>
</ul><pre><code><code class="source-code prettyprint">todos.map( t =&gt; &lt;TodoItem todo={ t } todos={ todos } /&gt; )</code>
</code></pre><ul>
<li>JSX <code>&lt;input defaultValue={ .... } onChange={ event =&gt; ... } /&gt;</code></li>
</ul><pre><code class="lang-jsx"><code class="source-code prettyprint">&lt;input type=&quot;text&quot;
    onChange={ event =&gt; todo.desc = event.target.value }
    defaultValue={ todo.desc }
/&gt;</code>
</code></pre><ul>
<li><code>Array.indexOf()</code> and <code>Array.remove()</code></li>
</ul><pre><code class="lang-js"><code class="source-code prettyprint">export default class TodoItem extends Component {
    removeTodo() {
        const { todo, todos } = this.props;
        const idx = todos.indexOf(todo);

        if (idx !== -1) {
            todos.remove(idx);
        }
    }


    render() {
        ...
    }
}</code>
</code></pre><h2>1. Create a f.lux <code>Store</code> with initial state<a name="store"></a></h2><p>Add the following lines to <code>main.js</code> to create the application&apos;s f.lux store:</p><pre><code class="lang-js"><code class="source-code prettyprint">import {
    Store,
    ObjectProperty
} from &quot;f.lux&quot;;


// create the store and starting state
const root = new ObjectProperty();
const state = { todos: [] }
const store = new Store(root, state);</code>
</code></pre><p>A f.lux based application uses a single store for managing all state. A <code>Store</code> instance is created by specifying a root property and the initial state. The property must be a <code>Property</code> subclass and the state a JSON compatible value of appropriate type for the root <code>Property</code>. In this case, an <code>ObjectProperty</code> instance is used to shadow, or proxy, a javascript literal object representing the application state. <code>ObjectProperty</code> is used to represent javascript literal objects and does not expose the rich <code>Map</code> api for adding and removing properties. <code>ObjectProperty</code> is useful when you have a well-defined object that does not require the functionality of a flexible, changing property list.</p><p>Drilling down into the initial state and adding an initial todo item:</p><pre><code class="lang-js"><code class="source-code prettyprint">{
    todos: [
        { desc: &quot;Go skiing!&quot;, completed: false }
    ]
}</code>
</code></pre><p>Autoshadowing will result with the following shadow property mapping:</p><ul>
<li><code>todos</code>: <code>ArrayProperty</code></li>
<li><code>todos</code> elements: <code>MapProperty</code> since these will be objects with a <code>desc</code> and <code>completed</code> flag</li>
<li><code>comp</code>: <code>PrimitiveProperty</code> will shadow the todo item&apos;s <code>string</code> property</li>
<li><code>completed</code>: <code>PrimitiveProperty</code> will shadow the todo item&apos;s <code>boolean</code> property</li>
</ul><p>The final change to <code>main.js</code> is to pass the <code>store</code> to the <code>&lt;Todos&gt;</code> component using:</p><pre><code class="lang-jsx"><code class="source-code prettyprint">ReactDOM.render(
    &lt;Todos store={ store }/&gt;,
    document.getElementById(&apos;react-ui&apos;)
);</code>
</code></pre><h2>2. Subscribe to store changes in <code>&lt;Todos&gt;</code><a name="changes"></a></h2><p>A React component subscribes with the store to be notified when the state changes as a result of f.lux actions. The store exposes the following methods for this purpose:</p><ul>
<li><code>subscribe(callback)</code> - the store will invoke the callback upon state changes</li>
<li><code>unsubscribe(callback)</code> - removes the callback from futher notifications</li>
</ul><p>The <code>callback</code> parameter has the following signature:</p><pre><code><code class="source-code prettyprint">callback(store, shadow, prevShadow)</code>
</code></pre><p>The top level <code>&lt;Todos&gt;</code> React component will be used to subscribe to state changes.</p><pre><code class="lang-js"><code class="source-code prettyprint">class Todos extends Component {
    componentWillMount() {
        const { store } = this.props;

        // bind onStateChange callback so can use it to register/unregister
        this.onStateChangeCallback = this.onStateChange.bind(this);

        // register for store change notificiations
        store.subscribe(this.onStateChangeCallback);
    }

    componentWillUnmount() {
        const { store } = this.props;

        store.unsubscribe(this.onStateChangeCallback);
    }

    onStateChange() {
        // brute force update entire UI on store change to keep demo app simple
        this.forceUpdate();
    }</code>
</code></pre><p>The <code>&lt;Todos&gt;</code> component can now refresh the user interface each time the store&apos;s state changes. <code>&lt;Todos&gt;</code> has an <code>&lt;h1&gt;</code> header with the number of incomplete items and is implemented with this change:</p><pre><code class="lang-js"><code class="source-code prettyprint">render() {
    const { todos } = this.props.store.shadow;
    const numIncomplete = todos.filter( t =&gt; !t.completed ).length;
    const remainingText = `${ numIncomplete } ${ pluralize(&quot;item&quot;, numIncomplete ) } remaining`;

    return &lt;div className=&quot;todoContainer&quot;&gt;
            &lt;h1&gt; F.lux Todos &lt;small&gt;{ remainingText }&lt;/small&gt;&lt;/h1&gt;

            &lt;AddTodo todos={ todos } /&gt;

            { this.renderTodos() }
        &lt;/div&gt;
}</code>
</code></pre><p>Here are the important sections broken down:</p><ul>
<li><p><code>const { todos } = this.props.store.shadow;</code></p>
<p>  The shadow state is accessed using the <code>store.shadow</code> property. The <code>todos</code> variable is a shadow reference to the actual state array. Use <code>todos</code> just as you would a normal array and any mutations will be asynchronously applied through generated actions.</p>
<p>  Remember, the initial state has the form: <code>{ todos: [] }</code>.</p>
</li>
</ul><ul>
<li><p><code>const numIncomplete = todos.filter( t =&gt; !t.completed ).length;</code></p>
<p>  This statement uses the Array <code>filter(iter)</code> method to obtain an array of incomplete items, <code>!t.completed</code>, and then takes the filtered array&apos;s length.</p>
</li>
</ul><ul>
<li><p><code>const remainingText = ``${ numIncomplete } ${ pluralize(&quot;item&quot;, numIncomplete ) } remaining``;</code></p>
<p>  Format text to be placed in the application header for the number of items remaing. Uses the <a href="https://github.com/blakeembrey/pluralize">pluralize</a> library to have the proper form of &quot;items&quot;.</p>
</li>
<li><p><code>&lt;h1&gt; F.lux Todos &lt;small&gt;{ remainingText }&lt;/small&gt;&lt;/h1&gt;</code></p>
<p>  Render the header with the number of incomplete items.</p>
</li>
<li><p><code>&lt;AddTodo todos={ todos } /&gt;</code></p>
<p>  The <code>&lt;AddTodo&gt;</code> component will need to <code>todos</code> shadow array to add a new item.</p>
</li>
</ul><h2>3. Implement <code>&lt;AddTodo&gt;</code> <code>addTodo()</code> function<a name="addtodo"></a></h2><p>The <code>&lt;AddTodo&gt;</code> component is now receiving a property containing the <code>todos</code> shadow array. This is used to implement the <code>addTodo()</code> function:</p><pre><code class="lang-js"><code class="source-code prettyprint">class AddTodo extends Component {
    addTodo() {
        const { todos } = this.props;
        const desc = this.todoInput.value;

        // Create a new Todo item
        const todo = {
            completed: false,
            desc,
            created: moment().toISOString()
        }

        // add the Todo item to the array
        todos.push(todo);

        // clear the input
        todoInput.value = &quot;&quot;;
    }</code>
</code></pre><p><a href="./manual/step-2.md">Step 2</a> in this tutorial will move this logic to a property but for now the logic is inlined in the component for ease or readability and allow the focus to remain on interacting with the shadow state. </p><p>Here are the key points explained:</p><ul>
<li><p><code>const { todos } = this.props;</code></p>
<p>  Get the shadow array from the property set by <code>&lt;Todos&gt;</code> component. Remember, this is a shadow array that proxies the actual state array.</p>
</li>
</ul><ul>
<li><p><code>const desc = this.todoInput.value;</code></p>
<p>  This gets the value from the <code>&lt;input ref={ ref =&gt; this.todoInput = ref } /&gt;</code> containing the descirption for the new todo item.</p>
</li>
</ul><ul>
<li><p><code>const todo = { completed: false, desc, created: moment().toISOString() }</code></p>
<p>  Creates the todo item state to be appended to the <code>todos</code> array. This will be encapsulated into a property function in <a href="./manual/step-2.md">Step 2</a>. Notice a Todo item has three properties: </p>
<ul>
<li><code>completed</code> - boolean to indicate if item is done</li>
<li><code>desc</code> - the description</li>
<li><code>created</code> - ISO 8601 formatted string for time item created</li>
</ul>
</li>
</ul><ul>
<li><p><code>todos.push(todo);</code></p>
<p>  Just like a normal array, the new Todo item is appended to the shadow array. This will result in a store change notification to the <code>&lt;Todos&gt;</code> component that will trigger a <code>render()</code> call.</p>
</li>
</ul><h2>4. Implement <code>&lt;TodoItem&gt;</code> to display, edit, and delete todo items<a name="items"></a></h2><p>A <code>&lt;TodoItem&gt;</code> displays three components on a single line:</p><ul>
<li>Checked/unchecked icon: shows the completed state and a click will toggle the <code>completed</code> value.</li>
<li>Input: displays and allows editing the item&apos;s description (<code>desc</code>).</li>
<li>Remove icon: clicking icon will delete the item.</li>
</ul><p>Here is the full source for the component:</p><pre><code class="lang-js"><code class="source-code prettyprint">class TodoItem extends Component {
    removeTodo() {
        const { todo, todos } = this.props;
        const idx = todos.indexOf(todo);

        if (idx !== -1) {
            todos.remove(idx);
        }
    }

    handleToggleCompleted() {
        const { todo } = this.props;

        // toggle the completed flag
        todo.completed = !todo.completed;
    }

    render() {
        const { todo } = this.props;
        const { completed, desc } = todo;
        const descClasses = classnames(&quot;todoItem-desc&quot;, {
                &quot;todoItem-descCompleted&quot;: completed
            });
        const completedClasses = classnames(&quot;todoItem-completed fa&quot;, {
                &quot;fa-check-square-o todoItem-completedChecked&quot;: completed,
                &quot;fa-square-o&quot;: !completed,
            });

        return &lt;div className=&quot;todoItem&quot;&gt;
                &lt;i className={ completedClasses } onClick={ () =&gt; this.handleToggleCompleted() } /&gt;

                &lt;input
                    type=&quot;text&quot;
                    className={ descClasses }
                    onChange={ event =&gt; todo.desc = event.target.value }
                    defaultValue={ desc }
                /&gt;

                &lt;i className=&quot;todoItem-delete fa fa-times&quot; onClick={ () =&gt; this.removeTodo() }/&gt;
            &lt;/div&gt;
    }
}</code>
</code></pre><p>Let&apos;s start the discussion with the <code>render()</code> function:</p><ul>
<li><p><code>const { completed, desc } = todo</code> </p>
<p>  Gets the &apos;completed&apos; and &apos;desc&apos; properties from the &apos;todo&apos; property. The next part of this step will show how this is set by doing a <code>todos.map( t =&gt; &lt;Todo todo={ t } /&gt;)</code> on the <code>todos</code> array.</p>
</li>
<li><p><code>&lt;i className={ completedClasses } onClick={ () =&gt; this.handleToggleCompleted() } /&gt;</code> </p>
<p>  Icon displays a checked box if the item is completed and an unchecked box otherwise. Clicking on the icon will call the components <code>handleToggleCompleted()</code> function (described below).</p>
</li>
<li><p><code>&lt;input defaultValue={ desc } onChange={ event =&gt; todo.desc = event.target.value }/&gt;</code> </p>
<p>  Displays and allows the <code>desc</code> property to be edited. Notice this is not a bound <code>&lt;input&gt;</code> which is done to keep things simple. <a href="./manual/step-5.md">Step 5: f.lux-react</a> will show an easy way to make this a bound component.</p>
<p>  The default value is the <code>desc</code> value.</p>
<p>  Each value change will cause the <code>onChange</code> event handler to be invoked. Now this is interesting:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  todo.desc = event.target.value</code>
</code></pre>
<p>  This statement assigns the <code>&lt;input&gt;</code> value (<code>event.target.value</code>) to the <code>todo.desc</code> property. Since <code>todo</code> and <code>desc</code> are proxies for the actual state, <strong>this statement will generate an update action to set the <code>desc</code> state value. And your code looks like regular javascript.</strong></p>
</li>
</ul><ul>
<li><p><code>&lt;i className=&quot;todoItem-delete fa fa-times&quot; onClick={ () =&gt; this.removeTodo() }/&gt;</code> </p>
<p>  This icon provides the ability to delete an item. Clicking on the icon will call the component&apos;s <code>removeTodo()</code> function (described below).</p>
</li>
</ul><p>Now let&apos;s examine the simple <code>handleToggleCompleted()</code> function:</p><ul>
<li><p><code>const { todo } = this.props</code></p>
<p>  Start by getting the todo item being edited.</p>
</li>
</ul><ul>
<li><p><code>todo.completed = !todo.completed</code></p>
<p>  Normal javascript code for toggling a boolean value. The difference is the f.lux library will generate an action to set the items &apos;completed&apos; flag in the store&apos;s actual state followed by an update notification to the <code>&lt;Todos&gt;</code> component.</p>
</li>
</ul><p>And finally, the <code>removeTodo()</code> function:</p><ul>
<li><p><code>const { todo, todos } = this.props</code></p>
<p>  The function will need to find the index of the <code>todo</code> item in the <code>todos</code> array to remove it.</p>
</li>
</ul><ul>
<li><p><code>const idx = todos.indexOf(todo)</code></p>
<p>  Uses the array <code>indexOf(value)</code> function to get the item&apos;s index. Again, this standard array function is being called on a shadow property. A value of -1 is returned if the value is not found.</p>
</li>
<li><p><code>todos.remove(idx)</code></p>
<p>  The item is removed from the shadow array. This will generate an update action that will remove the corresponding todo item from the actual <code>todos</code> array in the store&apos;s state.</p>
</li>
</ul><h2>5. Iterate all store todo items and create a <code>&lt;TodoItem&gt;</code> for each one<a name="iterate"></a></h2><p>And finally, let&apos;s update <code>&lt;Todos&gt;</code> component to render a <code>&lt;Todo&gt;</code> component for each item in the <code>todos</code> array:</p><pre><code class="lang-js"><code class="source-code prettyprint">renderTodos() {
    const { todos } = this.props.store._;

    if (todos.length) {
        return todos
            .sortBy(&apos;completed&apos;)
            .map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );
    } else {
        return &lt;p className=&quot;noItems&quot;&gt;What do you want to do today?&lt;/p&gt;
    }
}</code>
</code></pre><p>This function is called in <code>&lt;Todos&gt;</code> render function.</p><ul>
<li><p><code>const { todos } = this.props.store._</code></p>
<p>  <code>store._</code> is an alias for <code>store.shadow</code>. The variable name comes from the idea of a shadow on the ground, <code>_</code>, for an actual object.  </p>
</li>
</ul><ul>
<li><p><code>if (todos.length) {</code></p>
<p>  Yet another array-like access on an array shadow property. If function or property exists on a normal javascript array then it exists on the shadow.</p>
</li>
<li><p><code>todos.sortBy(&apos;completed&apos;)</code></p>
<p>  Oh, and there are a few extras. Array shadows have the regular <a href="./manual/(https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)"><code>sort(compareFunction)</code></a> function if that is your style. They have also been enhanced with the <a href="https://lodash.com/">lodash</a> inspired <a href="https://lodash.com/docs/4.17.4#sortBy"><code>sortBy()</code></a> function.</p>
</li>
</ul><ul>
<li><p><code>todos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; )</code></p>
<p>  Uses the array <code>map()</code> function to generate a <code>&lt;Todo&gt;</code> component for each value in the <code>todos</code> shadow array. This all pretty normal stuff by now except the <code>key</code> property:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  key={ t.$().pid() }</code>
</code></pre>
<p>  Each shadow property receives a <code>$()</code> function to get the <strong>f.lux accessor</strong>. The accessor provides context information for a property. In this case, <code>pid()</code> gets the unique <em>property ID</em> identifying this property, a monotomically increasing number. </p>
<p>  Some other interesting accessor functions:</p>
<ul>
<li><code>dotPath()</code> - gets the path to the property. For example, a todo item&apos;s path might be <code>todos.0</code>. Handy for debugging and form validation error highlighting.</li>
<li><code>isReadonly()</code> - f.lux provides the ability to specify values should be readonly (assignment will have no affect)</li>
<li><code>nextState()</code> - the properties state following any pending actions</li>
<li><code>store()</code> - the store containing the property</li>
</ul>
</li>
</ul><p><a href="./manual/step-2.md">Step 2: Properties</a></p></div>
        <a data-ice="link" href="manual/tutorial/step-1.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;"><span data-ice="label-inner">Step 2: Properties</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>Step 2: Properties</h1><h2>Overview</h2><p>This step creates f.lux <code>Property</code> classes for the root shadow state object, todos list, and todo items. Defining and using custom <code>Property</code> classes is the mechanism for colocating application logic with the application state and customizing the shadowing process. This feature is the root motivation for developing the f.lux library and key to making your application logic easier to reason about and maintain. </p><h2>Goals</h2><ol>
<li><a href="#user-content-todo">Todo property</a></li>
<li><a href="#user-content-todos">Todo list property</a></li>
<li><a href="#user-content-root">Define the root property</a></li>
<li><a href="#user-content-ui">Update UI to use <code>TodoListProperty</code> and <code>TodoProperty</code></a></li>
<li><a href="#user-content-update">Track todo item update time</a></li>
</ol><p>The <a href="https://github.com/akrumel/f.lux/tree/master/examples/tutorial/step-2"><code>examples/tutorial/step-2</code></a> directory contains the completed code for this step.</p><h2>Technical background</h2><p>The <a href="./manual/step-1.md">previous step</a> discussed the default shadowing capability known as &apos;auto-shadowing&apos;. Now let&apos;s learn how to customize the shadowing process using a declarative and composable approach.</p><h3>Built-in <code>Property</code> classes</h3><p>The f.lux <code>Store</code> &apos;shadows&apos; the application state by recursively mapping the state&apos;s values using various <code>Property</code> classes. The f.lux library provides the following building block types:</p><table>
<thead>
<tr>
<th>Property class</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ArrayProperty</code></td>
<td>Full <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> api and subscript random access, i.e. <code>arr[1]</code></td>
</tr>
<tr>
<td><code>IndexedProperty</code></td>
<td>Non-mutable <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a> api (<code>find(),</code>map()<code>,</code>reduce()`,...) and subscript random access</td>
</tr>
<tr>
<td><code>MapProperty</code></td>
<td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a> api plus &apos;dot&apos; access, i.e. <code>person.name</code> or `person[&apos;name&apos;]</td>
</tr>
<tr>
<td><code>ObjectProperty</code></td>
<td>&apos;dot&apos; access to values with no api beyond <code>toJSON()</code></td>
</tr>
<tr>
<td><code>PrimitiveProperty</code></td>
<td>exposes the actual value, i.e. <code>person.name</code> returns the string value</td>
</tr>
</tbody>
</table><ul>
<li><p><code>IndexedProperty</code> vs <code>ArrayProperty</code></p>
<p>  Both types represent arrays with the difference being the portion of the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a> api exposed. <code>ArrayProperty</code> exposes the complete api while <code>IndexedProperty</code> limits the api to the non-mutating methods, such as <code>filter()</code>, <code>find()</code>, <code>indexOf()</code>, and <code>map()</code> to name a few. Both types allow for random access and assignment, such as <code>todos[1].desc</code>.</p>
<p>  Use <code>IndexedProperty</code> when you want to model an array state property without exposing mutating functions like <code>push()</code>, <code>remove()</code>, and <code>splice()</code>. You can then specify a custom shadow api to expose mutation methods that involve implementation logic. </p>
<p>  <code>IndexedProperty</code> is used to implement the <code>TodoListProperty</code> in this step.</p>
</li>
<li><p><code>ObjectProperty</code> vs <code>MapProperty</code></p>
<p>  Both types represent javascript objects with the difference being the exposed api. <code>MapProperty</code> exposes the full <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a> api for adding, inspecting, and removing properties. <code>ObjectProperty</code> is more like a literal javascript object and does not expose a mutation api. Both types allow for random access and assignment using property key names, such <code>todo.desc</code> or <code>todo[&apos;desc&apos;]</code>.</p>
<p>  Use <code>ObjectProperty</code> when you do not need the <code>Map</code> api or want to define your own, custom shadow api. For example, use <code>ObjectProperty</code> to implement a property exposing the current phone orientation. The orientation may be either landscape or portrait. Allowing the application add and remove properties to an <code>OrientationProperty</code> is non-sensical. Instead, base <code>OrientationProperty</code> on <code>ObjectProperty</code> and expose a shadow api with a function <code>isLandscape()</code>. As described in the next section, you would use the life-cycle methods <code>propertyWillShadow()</code> and <code>propertyWillUnshadow()</code> to register and unregister for phone OS orientation change events, set a state variable based on the events, and the React UI could render the appropriate display by inspecting <code>orientation.isLandscape()</code>.</p>
<p>  <code>ObjectProperty</code> is used for implementing the <code>TodoProperty</code> in this step.</p>
</li>
</ul><h3><code>Property</code> features</h3><p>This tutorial step will explore some interesting <code>Property</code> features:</p><ul>
<li><p><strong>Life-cycle</strong></p>
<p>  A <code>Property</code> instance exists for the life of the underlying state, spans state changes, and has life-cycle driven by the shadowing process. A <code>Property</code> can tie into the life-cycle to register for system events, manage web sockets, update persistent stores, or log information. </p>
<p>  The life-cycle methods are:</p>
<ul>
<li><code>propertyWillShadow()</code> - invoked just before the shadow property is going to be added to the shadow state.</li>
<li><code>propertyDidShadow()</code> - state property was shadowed and the <code>Property</code> is fully functional.</li>
<li><code>propertyChildInvalidated(childProperty, sourceProperty)</code> - A child property mutation action has occurred and it&apos;s value will change in store&apos;s next update.</li>
<li><code>propertyDidUpdate()</code> - state managed by this property has changed.</li>
<li><code>propertyWillUnshadow()</code> - invoked prior to the <code>Property</code> being removed from the shadow state</li>
</ul>
</li>
<li><p><strong>Shadow api</strong></p>
<p>  Colocating application state with application logic is a foundational f.lux goal to improve type safety and make an application easier to reason about. This is accomplished by developing a shadow api for a property or utilizing the default api provided by f.lux (as was done in the previous step). This is actually how the <code>todos.map()</code> array function from the previous chapter is implemented behind the scenes:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  todos.map( t =&gt; &lt;TodoItem todo={ t } todos={ todos } /&gt; )</code>
</code></pre>
<p>  Writing a shadow api is just like writing a javascript class or defining a javascript object without the need to define and manage the data since that already exists in the f.lux <code>Store</code>. Ultimately, the shadow api will be instantiated as a <code>Shadow</code> subclass instance.</p>
</li>
<li><p><strong><code>type</code> class variable</strong></p>
<p>  Every <code>Property</code> class exposes a <code>type</code> class variable describing how the state data should be shadowed. The <code>type</code> variable provides a <code>StateType</code> instance and is primarily used to compose the application state structure. the <code>type</code> variables specify such information as the shadow api, default values, initital state values, readonly access, and whether to enable/disable auto-shadowing. </p>
<p>  This step will define several custom f.lux property types: <code>TodoProperty</code> and <code>TodoListProperty</code>. The <code>type</code> class variable <code>TodoProperty.type</code> defines how f.lux should shadow each todo item and is setup when defining <code>TodoProperty</code>. The <code>TodoListProperty.type</code> describes how the todos array should be shadowed and will be configured to shadow each element using <code>TodoProperty</code>.</p>
<p>  <code>type</code> class variables provide the declarative mechanism for describing the shadowing process, are super easy to setup, and will be explored in detail during this step.</p>
</li>
</ul><h3>Creating a <code>Shadow</code></h3><p>Specifing a shadow api consists of two steps:</p><ol>
<li><p><strong>Define the api</strong></p>
<p> There are two ways to define shadow api:</p>
<ul>
<li><p><strong>Subclassing</strong></p>
<pre><code class="lang-js"><code class="source-code prettyprint">  class TodoShadow extends Shadow {
      get momentCreated() {
          return moment(this.created);
      }

      isCompleted() {
          return this.completed;
      }
  }</code>
</code></pre>
</li>
<li><p><strong>Literal object</strong></p>
<pre><code class="lang-js"><code class="source-code prettyprint">  const TodoListShadow = {
      get incompleteSize() {
          return this.reduce( (acc, t) =&gt; !t.completed ?acc+1 :acc, 0);
      },

      addTodo(desc) {
          return this.push(TodoProperty.create(desc));
      },

      // other methods and properties here
  }</code>
</code></pre>
<p>In both cases, the <code>this</code> reference is the shadow state for the property.</p>
</li>
</ul>
</li>
</ol><ol>
<li><p><strong>Attach the api using <code>Property.type</code></strong></p>
<p> Each built-in <code>Property</code> class provides a static function for creating a specialized <code>Property</code> class called <code>createClasss()</code> that takes a shadow definition and returns a new <code>Property</code> subclass. For example,</p>
<pre><code class="lang-js"><code class="source-code prettyprint"> export default IndexedProperty.createClass(TodoListShadow);</code>
</code></pre>
<p> creates a new <code>IndexedProperty</code> subclass where the shadowing process will use the <code>TodoListShadow</code> as the shadow api. This tutorial step will explore additional capabilities of <code>createClass()</code> and how to utilize the generated class.</p>
</li>
</ol><h3>Custom properties</h3><p>A custom <code>Property</code> class can be created through subclassing in addition to the <code>createClass()</code> approach mentioned in the previous section. </p><p><strong>F.lux Design Point: The subclassing approach is used when you want to tie into the <code>Property</code> life-cycle.</strong></p><p>Creating a custom <code>Property</code> class requires two steps:</p><ol>
<li><p><strong>Extend an existing <code>Property</code> class</strong></p>
<pre><code class="lang-js"><code class="source-code prettyprint"> export default class TodoProperty extends ObjectProperty {
     // implementation here
 }</code>
</code></pre>
</li>
<li><p><strong>Define the <code>type</code> static variable</strong></p>
<p> Each built-in type has a <code>defineType()</code> static function that will create a <code>type</code> static veriable that can be used for configuring the shadowing process. Continuing the <code>TodoProperty</code> in step 1:</p>
<pre><code class="lang-js"><code class="source-code prettyprint"> ObjectProperty.defineType(TodoProperty);</code>
</code></pre>
<p> This tutorial step will explore additional capabilities of <code>defineType()</code>.</p>
</li>
</ol><h3>Configuring the <code>type</code> static variable</h3><p>Both <code>createClass()</code> and <code>defineType()</code> static functions take callback as the second parameter. The callback has the form:</p><pre><code class="lang-js"><code class="source-code prettyprint">function callback(type)</code>
</code></pre><p>where <code>type</code> is a <code>StateType</code> instance.</p><p><code>StateType</code> defines the shadowing process for an f.lux property:</p><ul>
<li><strong>shadow type</strong> - the shadow class or javascript literal object definition as described aboe</li>
<li><strong>child property types</strong> - specify child property names and shadow <code>type</code></li>
<li><strong>element type</strong> - specify a <code>type</code> for each contained child property or array value</li>
<li><strong>readonly</strong> - shadow state properties may be marked as readonly so assignments will not cause mutations. Handy for readonly properties like object IDs or system defined values like orientation or location.</li>
</ul><p>Extending the eariler <code>IndexedProperty.createClass()</code> example, here is an example with a <code>type</code> configuration callback without comment as it will be covered in detail in the following sections:</p><pre><code class="lang-js"><code class="source-code prettyprint">IndexedProperty.createClass(TodoListShadow, type =&gt; {
    type.elementType(TodoProperty.type)    // each model contained will be a TodoProperty type
        .typeName(&quot;TodoListProperty&quot;)      // useful for diagnostics
})</code>
</code></pre><h3>Accessing the <code>Property</code> from the <code>Shadow</code></h3><p>The <code>Shadow</code> class is the base class for all f.lux shadow state properties. Its api is quite spartan yet it provides access to wealth of information and capabilities. <code>Shadow</code> defines the useful, standard Javascript functions <code>toJSON()</code> and <code>toString()</code>. Several additional f.lux specific methods are:</p><ul>
<li><code>$()</code> - returns the &apos;accessor&apos; used in the previous step to get the unique <code>Property</code> instance id: <code>todo.$().pid()</code></li>
<li><code>$$()</code> - returns the backing <code>Property</code> instance</li>
</ul><p>Accessing a shadow&apos;s backing <code>Property</code> is most often used to access specific capaiblities the <code>Property</code> class posseses but are not shadowed. In this step we will access <code>Property</code> level apis in <code>IndexedProperty</code> and <code>ObjectProperty</code> for mutating the state, a capability not provided by the parent <code>Shadow</code> classes. This is more fully explained in the coding sections below.</p><h2>1. Todo property<a id="todo"></a></h2><p>A todo item will have the following properties:</p><ul>
<li><code>desc</code> - string describing the task</li>
<li><code>completed</code> - boolean describing if the task has been completed</li>
<li><code>created</code> - an ISO 8601 formatted date string for when the item was created</li>
<li><code>updated</code> - an ISO 8601 formatted date string for when the item was last modified</li>
</ul><p>Dates will be manipulated using the excellent <code>moment</code> library.</p><h3>Import f.lux types and <code>moment</code></h3><pre><code class="lang-js"><code class="source-code prettyprint">import moment from &quot;moment&quot;;

import {
    ObjectProperty,
    PrimitiveProperty,
    Shadow,
} from &quot;f.lux&quot;;</code>
</code></pre><h3>Create the <code>TodoProperty</code> class</h3><p>The last portion of this tutorial step will use the <code>Property</code> life-cycle methods to set the <code>updated</code> child property whenever <code>desc</code> or <code>completed</code> change. Utilizing the life-cycle requires the subclassing approach. </p><p>The <code>TodoProperty</code> class does not need the <code>Map</code> api for mutations so let&apos;s extend <code>ObjectProperty</code>:</p><pre><code class="lang-js"><code class="source-code prettyprint">export default class TodoProperty extends ObjectProperty {
    static create(desc) {
        const now = moment().toISOString();

        return {
            completed: false,
            created: now,
            desc: desc,
            updated: now,
        }
    }
}</code>
</code></pre><p>A few things worth noting:</p><ul>
<li><p><code>class TodoProperty extends ObjectProperty { ... }</code></p>
<p>  Creating an <code>Property</code> class is as simple as subclassing an existing <code>Property</code> class. You can also subclass your own or third party <code>Property</code> subclasses though this is not generally a preferred style. The idea being that <code>Property</code> subclasses are <strong>data components</strong> and not general purpose business logic class hieararchies.</p>
<p>  We will tie into the property life-cycle in the last part of this tutorial step by adding a <code>propertyChildInvalidated()</code> method.</p>
</li>
<li><p><code>static create(desc) { ... }</code></p>
<p>  A static function for creating a new todo item state object. This has nothing to do with f.lux beyond demonstrating how <code>Property</code> classes provide single place, common sense location to put logic related to a state value. Should the expected structure of a todo item change then all changes can be made in a single file.</p>
</li>
</ul><h3>Create the <code>TodoShadow</code> class</h3><p>Let&apos;s stick with the subclassing theme for creating the shadow api:</p><pre><code class="lang-js"><code class="source-code prettyprint">class TodoShadow extends Shadow {
    get momentCreated() {
        return moment(this.created);
    }

    get momentUpdated() {
        return moment(this.updated);
    }
}</code>
</code></pre><ul>
<li><p><code>class TodoShadow extends Shadow { ... }</code></p>
<p>  <code>Shadow</code> is the base class for all shadow apis. Every built-in <code>Property</code> class has a default <code>Shadow</code> class. Extending from the property <code>Shadow</code> class is important or you risk losing expected functionality from the shadow state property. Here is a table listing the <code>Property</code> to <code>Shadow</code> class relationships:</p>
<p>  | <code>Property</code> class       | <code>Shadow</code> class
  | ---------------------- | -------------------------
  | <code>ArrayProperty</code>        |  <code>ArrayShadow</code>
  | <code>IndexedProperty</code>      |  <code>IndexedShadow</code>
  | <code>MapProperty</code>          |  <code>MapShadow</code>
  | <code>ObjectProperty</code>       |  <code>Shadow</code>
  | <code>PrimitiveProperty</code>    |  <code>Shadow</code></p>
</li>
</ul><ul>
<li><p><code>momentCreated</code> and <code>momentUpdated</code> virtual properties</p>
<p>  The <code>created</code> and <code>updated</code> properties are strings yet the UI needs values suitable for sorting and filtering. To that end, we create two virtual properties that return <code>moment</code> objects created using the child shadow state properties. Notice how </p>
<pre><code><code class="source-code prettyprint">  return moment(this.created);</code>
</code></pre><p>  uses the <code>this</code> reference:</p>
<ul>
<li><code>this</code> - refers to the f.lux shadow state for the todo item</li>
<li><p><code>created</code> - the child f.lux shadow state property</p>
<p>The UI can then access the virtual properties:</p>
<pre><code><code class="source-code prettyprint">sortBy(todos, t =&gt; -t.momentCreated.valueOf() )</code>
</code></pre><p><strong>Key F.lux Concept: Shadow api methods use the <code>this</code> reference to access the shadow state.</strong> </p>
</li>
</ul>
</li>
</ul><h3>Define <code>TodoProperty.type</code></h3><p>The easiest way to define the <code>type</code> descriptor is to use the <code>defineType()</code> static function in your built-in <code>Property</code> parent class:</p><pre><code class="lang-js"><code class="source-code prettyprint">ObjectProperty.defineType(TodoProperty, TodoShadow, type =&gt; {
    type.properties({
                completed: PrimitiveProperty.type.initialState(false),
                created: PrimitiveProperty.type.readonly,
                desc: PrimitiveProperty.type,
                updated: PrimitiveProperty.type.readonly,
            })
        .readonlyOff
        .typeName(&quot;TodoProperty&quot;);
});</code>
</code></pre><p>where <code>defineType()</code> parameters are:</p><ul>
<li><code>TodoProperty</code> - the <code>ObjectProperty</code> subclass (not an instance)</li>
<li><code>TodoShadow</code> - a <code>Shadow</code> subclass or object literal</li>
<li><code>callback(type)</code> - callback for specializing the <code>StateType</code> instance to be used for the <code>type</code> descriptor</li>
</ul><p>Notice the callback does not return a value since the <code>type</code> parameter is a <code>StateType</code> instance that is mutated by configuration methods and properties. Not very functional but it allows for chaining calls as demonstrated above. </p><p>Let&apos;s checkout some of the finer points:</p><ul>
<li><p><code>type.properties({ ... })</code></p>
<p>  <code>StateType</code> method used to configure the child properties. Auto-shadowing will shadow the current state but does not provide any control over the shadowing process. <code>properties({}) takes an object parameter where the key/value paris are the child property name and associated</code>StateType` value. </p>
</li>
<li><p><code>desc: PrimitiveProperty.type</code></p>
<p>  Our first glimpse at using the <code>type</code> descriptor. Each built-in <code>Property</code> class has a <code>type</code> static variable. In this case,  we are specifying the <code>desc</code> property as a Javascript primitive (<code>boolean</code>, <code>string</code>, or <code>number</code>). This mimics the auto-shadowing process. Just like React component <code>propTypes</code>, it never hurts to be explicit about data expectations.</p>
</li>
<li><p><code>completed: PrimitiveProperty.type.initialState(false)</code></p>
<p>  This specifies an initial value for the <code>completed</code> property using the <code>StateType.initialState(value)</code> method.</p>
</li>
<li><p><code>created: PrimitiveProperty.type.readonly</code></p>
<p>  The <code>created</code> property is declared as readonly to prevent application code from assigning a new value. This is accomplished using the <code>StateType.readonly</code> property. Notice <code>readonly</code> is not a function yet is still chainable:</p>
<pre><code><code class="source-code prettyprint">  PrimitiveProperty.type.readonly.initialState(null)</code>
</code></pre></li>
</ul><h3>The code</h3><p>Here is the entire <code>TodoProperty.js</code> source:</p><pre><code class="lang-js"><code class="source-code prettyprint">import moment from &quot;moment&quot;;

import {
    ObjectProperty,
    PrimitiveProperty,
    Shadow,
} from &quot;f.lux&quot;;


export default class TodoProperty extends ObjectProperty {
    static create(desc) {
        const now = moment().toISOString();

        return {
            completed: false,
            created: now,
            desc: desc,
            updated: now,
        }
    }
}


class TodoShadow extends Shadow {
    get momentCreated() {
        return moment(this.created);
    }

    get momentUpdated() {
        return moment(this.updated);
    }
}


ObjectProperty.defineType(TodoProperty, TodoShadow, type =&gt; {
    type.properties({
                completed: PrimitiveProperty.type.initialState(false),
                created: PrimitiveProperty.type.readonly,
                desc: PrimitiveProperty.type,
                updated: PrimitiveProperty.type.readonly,
            })
        .readonlyOff                 // enable &apos;completed&apos; and &apos;desc&apos; assignment
        .typeName(&quot;TodoProperty&quot;);
});</code>
</code></pre><h2>2. Todo list property<a id="todos"></a></h2><p>The <code>TodoListProperty</code> will be an <code>IndexedProperty</code>. Remember, <code>IndexedProperty</code> shadows an array and exposes the <code>Array</code> api <strong>minus</strong> the mutation methods, such as <code>push()</code>, <code>pop()</code>, and <code>splice()</code>. We are going to add additional shadow methods and properties the React UI will find useful:</p><ul>
<li><code>incompleteSize</code> property - a virtual property providing the number of incomplete todo items</li>
<li><code>addTodo(desc)</code> - takes a todo description and appends a new todo item to the array</li>
<li><code>removeTodo(todo)</code> - takes a <code>TodoProperty</code> and removes it from the array</li>
</ul><h3>Create the <code>TodoListShadow</code></h3><p>The <code>IndexedProperty</code> uses the <code>IndexedShadow</code> as its default shadow type. By defining the <code>TodoListShadow</code> using an object literal approach, we do not have to worry extending the correct <code>Shadow</code> subclass.</p><pre><code class="lang-js"><code class="source-code prettyprint">const TodoListShadow = {
    get incompleteSize() {
        return this.reduce( (acc, t) =&gt; !t.completed ?acc+1 :acc, 0);
    },

    addTodo(desc) {
        const listProp = this.$$();

        listProp._indexed.push(TodoProperty.create(desc));
    },

    removeTodo(todo) {
        const listProp = this.$$();
        const idx = this.indexOf(todo);

        if (idx !== -1) {
            listProp._indexed.remove(idx);
        }
    }
}</code>
</code></pre><p>A few points of interest:</p><ul>
<li><p><code>const listProp = this.$$();</code></p>
<p>  Occassionally, a shadow method requires access to the backing <code>Property</code> instance. This is accomplished using the <code>Shadow</code> method <code>$$()</code>. All shadow state property values have this method. </p>
</li>
<li><p><code>listProp._indexed.push(TodoProperty.create(desc))</code></p>
<p>  <code>IndexedShadow</code> does not provide mutation methods but <code>IndexedProperty</code> does through the <code>_indexed</code> instance variable. <code>TodoListProperty</code> is defined as an <code>IndexedProperty</code> via the <code>IndexedProperty.createClass()</code> declaration.</p>
</li>
<li><p><code>listProp._indexed.remove(idx)</code></p>
<p>  And this takes advantage of the <code>_indexed.remove()</code> function.</p>
</li>
<li><p><code>incompleteSize</code> virtual property</p>
<p>  <code>incompleteSize</code> is a virtual property defined using the es2015 <code>get</code> keyword like <code>momentCreated</code> in <code>TodoProperty</code>. The property body is interesting:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  return this.reduce( (acc, t) =&gt; !t.completed ?acc+1 :acc, 0);</code>
</code></pre>
<ul>
<li><code>this.reduce(callback)</code> uses the <code>Array.reduce()</code> function provided by the <code>IndexedShadow</code> class. When writing a shadow api method, <code>this</code> references the shadow state api you are implementing. The next section uses <code>IndexedProperty.createClass()</code> to set the <code>TodoListShadow</code> as the properties api. <code>IndexedProperty.createClass()</code> will create an <code>IndexShadow</code> subclass and assign the properties and methods of the <code>TodoListShadow</code> literal object to the subclass&apos; prototype.</li>
<li><p>each iteration passes a todo item along with the accumulator value: <code>(acc, t) =&gt; !t.completed ?acc+1 :acc</code>. This code adds one to the accumulator if the todo item&apos;s <code>completed</code> flag is false: <code>!t.completed</code>.</p>
<p><strong>Key F.lux Concept: When working with f.lux shadow types the <code>this</code> reference always references the shadow state and not the actual state of the <code>Store</code>. This means any changes to the shadow state will be asynchronously reflected in the actual state followed by a <code>Store</code> change notification being sent to all registered callbacks.</strong></p>
</li>
</ul>
</li>
</ul><h3>Create the <code>TodoListProperty</code></h3><p><code>TodoListProperty</code> is created without resorting to subclassing as there is no need to access the property life-cycle. This is accomplished with:</p><pre><code class="lang-js"><code class="source-code prettyprint">export default IndexedProperty.createClass(TodoListShadow, type =&gt; {
    type.elementType(TodoProperty.type)    
        .typeName(&quot;TodoListProperty&quot;)      
});</code>
</code></pre><p>Each built-in <code>Property</code> class has a static <code>createClass()</code> function for creating a <code>Property</code> subclass with a <code>type</code> descriptor attached.</p><p>The parameters are:</p><ul>
<li><code>TodoListShadow</code> - the shadow type for the new property type. This parameter can also be an <code>IndexedShadow</code> subclass in this case.</li>
<li><code>callback(type)</code> - configure the shadowing behavior.</li>
</ul><p>The new twist here is:</p><pre><code class="lang-js"><code class="source-code prettyprint">type.elementType(TodoProperty.type)</code>
</code></pre><p><code>StateType.elementType(type)</code> specifies the f.lux type used to shadow each element. Thus, <code>type.elementType(TodoProperty.type)</code> instructs f.lux to use the <code>TodoProperty</code> for shadowing each element.</p><h3>The code</h3><p>Here is the entire <code>TodoListProperty.js</code> source:</p><pre><code class="lang-js"><code class="source-code prettyprint">import { IndexedProperty } from &quot;f.lux&quot;;

import TodoProperty from &quot;./TodoProperty&quot;;


const TodoListShadow = {
    get incompleteSize() {
        return this.reduce( (acc, t) =&gt; !t.completed ?acc+1 :acc, 0);
    },

    addTodo(desc) {
        const listProp = this.$$();

        listProp._indexed.push(TodoProperty.create(desc));
    },

    removeTodo(todo) {
        const listProp = this.$$();
        const idx = this.indexOf(todo);

        if (idx !== -1) {
            listProp._indexed.remove(idx);
        }
    }
}

export default IndexedProperty.createClass(TodoListShadow, type =&gt; {
    type.elementType(TodoProperty.type)    // each model contained will be a TodoProperty type
        .typeName(&quot;TodoListProperty&quot;)      // useful for diagnostics
});</code>
</code></pre><h2>3. Create root property<a id="root"></a></h2><p>The f.lux <code>Property</code> class for the root state is the simplest property. </p><h3>Create <code>TodoRootProperty</code></h3><p>Like <code>TodoProperty</code>, the root property is an <code>ObjectProperty</code> yet it does not tie into the <code>Property</code> life-cycle so does not use subclassing and does not provide a customized api.</p><pre><code class="lang-js"><code class="source-code prettyprint">export default ObjectProperty.createClass({}, type =&gt; {
    type.autoshadowOff                          
        .properties({                           
                todos: TodoListProperty.type,   
            })
        .readonly                               
        .typeName(&quot;TodoRootProperty&quot;);          
});</code>
</code></pre><p>There are a few new wrinkles worth discussing:</p><ul>
<li><code>type.autoshadowOff</code> - the f.lux shadowing process will only process explicitly defined properties</li>
<li><code>type.readonly</code> - recursively marks all descendent properties as readonly unless a property <code>type</code> descriptor marks the property using <code>readonlyOff</code>. This is why <code>TodoProperty.type</code> has is defined using <code>readonlyOff</code>. Take a quick look if you did not notice above. Marking the property as readonly ensure the <code>todos</code> array is not reassigned:</li>
</ul><pre><code class="lang-js"><code class="source-code prettyprint">root.todos = [];       // this will have no affect</code>
</code></pre><h3>Create the <code>Store</code> using <code>TodoRootProperty</code></h3><p>Using <code>TodoRootProperty</code> as the basis for the shadow state requires a small change to <code>main.js</code>:</p><p>Change the lines:</p><pre><code class="lang-js"><code class="source-code prettyprint">const root = new ObjectProperty();
const state = { todos: [] }
const store = new Store(root, state);</code>
</code></pre><p>to </p><pre><code class="lang-js"><code class="source-code prettyprint">const root = new TodoRootProperty();
const store = new Store(root);</code>
</code></pre><p>As an interesting aside, notice the new code does not require specifying an initital state. The <code>Store</code> obtains it from the <code>TodoRootProperty</code> instance passed into the constructor with the line:</p><pre><code class="lang-js"><code class="source-code prettyprint">state = root.initialState();</code>
</code></pre><p><code>initialState()</code> is a <code>Property</code> method and it uses <code>TodoRootProperty.type</code> to calculate it.</p><h2>4. Update UI to use <code>TodoListProperty</code> and <code>TodoProperty</code><a id="ui"></a></h2><h3><code>Todos.react.js</code></h3><p>Improve <code>todos</code> sorting for rendering the <code>&lt;TodoItem&gt;</code> components by sorting incomplete items first and a secondary sorting on the <code>todo.created</code> date. Change the following portion of <code>renderTodos()</code> from:</p><pre><code class="lang-js"><code class="source-code prettyprint">return todos
    .sortBy(&apos;completed&apos;)
    .map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );</code>
</code></pre><p>to the more advanced:</p><pre><code class="lang-js"><code class="source-code prettyprint">return todos
    .sortBy([ &apos;completed&apos;, t =&gt; -t.momentCreated.valueOf() ])
    .map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );</code>
</code></pre><p>This code uses the <code>TodoProperty</code> virtual property <code>momentCreated</code> for the secondary sorting criteria.</p><h3><code>AddTodo.react.js</code></h3><p>Utilize the <code>TodoListShadow.addTodo(desc)</code> function to append a new todo item. Remember, <code>TodoListProperty</code> is an <code>IndexedProperty</code> and so the array does not have <code>push()</code> or <code>unshift()</code> mutation functions. The only way to add a new todo item is through <code>addTodo()</code>.</p><p>Change the <code>&lt;AddTodo&gt;</code> component method <code>addTodo()</code> from:</p><pre><code class="lang-js"><code class="source-code prettyprint">const todo = {
    completed: false,
    desc,
    created: moment().toISOString()
}

// add the Todo item to the array
todos.push(todo);</code>
</code></pre><p>to the much simpler</p><pre><code class="lang-js"><code class="source-code prettyprint">todos.addTodo(desc);</code>
</code></pre><p>Notice how using custom <code>Property</code> classes with specialized apis remove &apos;business logic&apos; from the user interface code in a very natural way.</p><h3><code>TodoItem.react.js</code></h3><p>Utilize the <code>TodoListShadow.removeTodo(todo)</code> function to remove a todo item. The <code>todos</code> shadow state array does not have a <code>remove()</code> function since <code>IndexedProperty</code> does not provide <code>Array</code> mutation methods.</p><p>Change <code>&lt;TodoItem&gt; component function removeTodo()</code> from:</p><pre><code class="lang-js"><code class="source-code prettyprint">const idx = todos.indexOf(todo);

if (idx !== -1) {
    todos.remove(idx);
}</code>
</code></pre><p>to the much nicer:</p><pre><code class="lang-js"><code class="source-code prettyprint">todos.removeTodo(todo);</code>
</code></pre><p>We can simplify the code further by inlining the event handlers since the <code>TodoProperty</code> contains the logic. The <code>&lt;TodoItem&gt;</code> can now be a functional component:</p><pre><code class="lang-js"><code class="source-code prettyprint">export default function TodoItem(props, context) {
    const { todo, todos } = props;
    const { completed, desc } = todo;
    const descClasses = classnames(&quot;todoItem-desc&quot;, {
            &quot;todoItem-descCompleted&quot;: completed
        });
    const completedClasses = classnames(&quot;todoItem-completed fa&quot;, {
            &quot;fa-check-square-o todoItem-completedChecked&quot;: completed,
            &quot;fa-square-o&quot;: !completed,
        });

    return &lt;div className=&quot;todoItem&quot;&gt;
            &lt;i className={ completedClasses } onClick={ () =&gt; todo.completed = !todo.completed } /&gt;

            &lt;input
                type=&quot;text&quot;
                className={ descClasses }
                onChange={ event =&gt; todo.desc = event.target.value }
                defaultValue={ desc }
            /&gt;

            &lt;i className=&quot;todoItem-delete fa fa-times&quot; onClick={ () =&gt; todos.removeTodo(todo) }/&gt;
        &lt;/div&gt;
}</code>
</code></pre><h2>5. Track todo item update time<a id="update"></a></h2><p>Let&apos;s conclude this step by returning to the <code>TodoProperty</code> class. Our goal is to utilize the f.lux property life-cycle to set a new timestamp on the <code>updated</code> property whenever the <code>desc</code> or <code>completed</code> properties change. The <code>updated</code> property will be used in the next tutorial step as a sorting criteria. The most commmon use for the f.lux property life-cycle is to perform some activity when a property is shadowed and unshadowed. A property can use the shadowing life-cycle callbacks to register/unregister for interesting events, manage timers, or setup/teardown network connections. </p><p>In this case, we want to set the <code>updated</code> property each time a <code>TodoProperty</code> <code>desc</code> or <code>completed</code> property changes. Implement the </p><pre><code><code class="source-code prettyprint">propertyChildInvalidated(childProperty, sourceProperty)</code>
</code></pre><p>method in your <code>Property</code> class to be notified each time a descendent property value <strong>is going to change</strong>. The parameters are:</p><ul>
<li><code>childProperty</code> - the immediate child property from where the change is coming</li>
<li><code>sourceProperty</code> - the property that is actually changing</li>
</ul><p>The <code>TodoProperty</code> child properties are all primitive so we are not concerned about &apos;bubbling&apos; property change notifications and will deal with the <code>childProperty</code> parameter.</p><p>Keep in mind, we are now working in the <code>Property</code> class and not a <code>Shadow</code> class. The <code>this</code> reference now points to the <code>Property</code> and not the shadow state. Here is the <code>TodoProperty</code> implementation:</p><pre><code class="lang-js"><code class="source-code prettyprint">propertyChildInvalidated(childProperty, sourceProperty) {
    const childName = childProperty.name();

    if (childName === &quot;completed&quot; || childName === &quot;desc&quot;) {
        // _keyed is defined in ObjectProperty and provides a non-shadowed api for working with
        // child properties. We use the api to &apos;set&apos; a readonly property value
        this._keyed.set(&quot;updated&quot;, moment().toISOString());
    }
}</code>
</code></pre><p>Ok, there is some new stuff here:</p><ul>
<li><p><code>const childName = childProperty.name()</code></p>
<p>  <code>name()</code> is a <code>Property</code> base class method returning the shadowed property name. We use the <code>childProperty.name()</code> value to determine if the <code>desc</code> or <code>completed</code> properties changed. If so, then we set a new value on the <code>updated</code> child property.</p>
</li>
<li><p><code>this._keyed.set(&quot;updated&quot;, moment().toISOString())</code></p>
<p>  It&apos;s been a while so here is the definition for <code>updated</code>:</p>
<pre><code><code class="source-code prettyprint">  updated: PrimitiveProperty.type.readonly</code>
</code></pre><p>  The <code>readonly</code> property means assignment (<code>=</code>) cannot be used to set a new value. <code>ObjectProperty</code> provides a non-shadowed (hidden) api for mutating a property&apos;s state. The api is available through the inherited <code>_keyed</code> instance variable and is of type <code>KeyedApi</code>. The <code>updated</code> property value can be set by:</p>
<pre><code><code class="source-code prettyprint">  this._keyed.set(&quot;updated&quot;, moment().toISOString())</code>
</code></pre></li>
</ul><h3>The code</h3><p>Here is the updated <code>TodoProperty</code> class:</p><pre><code class="lang-js"><code class="source-code prettyprint">export default class TodoProperty extends ObjectProperty {
    propertyChildInvalidated(childProperty, sourceProperty) {
        const childName = childProperty.name();

        if (childName === &quot;completed&quot; || childName === &quot;desc&quot;) {
            // _keyed is defined in ObjectProperty and provides a non-shadowed api for working with
            // child properties. We use the api to &apos;set&apos; a readonly property value
            this._keyed.set(&quot;updated&quot;, moment().toISOString());
        }
    }

    static create(desc) {
        const now = moment().toISOString();

        return {
            completed: false,
            created: now,
            desc: desc,
            updated: now,
        }
    }
}

ObjectProperty.defineType(TodoProperty, TodoShadow, type =&gt; {
    type.properties({
                completed: PrimitiveProperty.type.initialState(false),
                created: PrimitiveProperty.type.readonly,
                desc: PrimitiveProperty.type,
                updated: PrimitiveProperty.type.readonly,
            })
        .readonlyOff                 // enable &apos;completed&apos; and &apos;desc&apos; assignment
        .typeName(&quot;TodoProperty&quot;);
});</code>
</code></pre><h2>Final Thoughts</h2><p>This tutorial step covered how to define custom <code>Property</code> classes and customizing the f.lux shadowing process. </p><p>Important concepts covered include:</p><ul>
<li><code>IndexedProperty</code> vs <code>ArrayProperty</code></li>
<li><code>ObjectProperty</code> vs <code>MapProperty</code></li>
<li>Subclass an existing <code>Property</code> class when your property needs to utilize the <code>Property</code> life-cycle.</li>
<li>Use <code>type.readonly</code> to mark shadow properties as read access only. </li>
<li><code>IndexedProperty._indexed</code> and <code>ObjectProperty._keyed</code> instance variable provide state mutation methods that work for updating readonly shadow state properties.</li>
<li>A shadow method can use the <code>$$()</code> method to access the backing property.</li>
</ul><h2>Next Step</h2><p><a href="./manual/step-3.md">Step 3: UI State</a></p></div>
        <a data-ice="link" href="manual/tutorial/step-2.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;"><span data-ice="label-inner">Step 3: UI State</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>Step 3: UI State</h1><h2>Overview</h2><p>This step will implement a toolbar for filtering and sorting the todo items. The application state will be extended to include UI state for the desired functionality. </p><p>Here is an application screenshot containing the toolbar: </p><hr><p><img src="./manual/assets/step-3-screenshot.png" alt="Step 3 Screenshot"></p><hr><h2>Goals</h2><ol>
<li><a href="#user-content-uiproperty"><code>UiProperty</code></a></li>
<li><a href="#user-content-root">Update <code>ToodRootProperty</code></a></li>
<li><a href="#user-content-selectors"><code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code></a></li>
<li><a href="#user-content-todos">Update <code>&lt;Todos&gt;</code></a></li>
</ol><p>The <a href="https://github.com/akrumel/f.lux/tree/master/examples/tutorial/step-3"><code>examples/tutorial/step-3</code></a> directory contains the completed code for this step.</p><h2>Technical background</h2><h3>Property accessor (<code>$()</code>)</h3><p>Each shadow state property has a <code>$()</code> method for accessing the <em>property accessor.</em> The property accessor was used to generate a React component key in the previous steps:</p><pre><code class="lang-js"><code class="source-code prettyprint">todos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );</code>
</code></pre><p>The accessor contains methods for obtaining f.lux related information. The most commonly used property accessor methods include: </p><ul>
<li><code>dotPath()</code> - gets the path from the root shadow state to the referenced shadow state property. For example, a complex path could be <code>foo.bar.baz</code>.</li>
<li><code>latest()</code> - get a reference to the current shadow state property. Useful when an asynchronous call returns and the state may have been updated.</li>
<li><code>pid()</code> - gets the unqiue property id</li>
<li><code>rootShadow()</code> - gets the <code>Store</code> managed root shadow state object</li>
<li><code>state()</code> - gets the <code>Store</code> managed actual state (not the shadow state)</li>
<li><code>store()</code> - gets the <code>Store</code> containing the shadow state property</li>
</ul><p>This tutorial step will use the <code>$().rootShadow()</code> method.</p><h3>Property initial state</h3><p>The <a href="./manual/step-2.md">previous step</a> initialized the <code>Store</code> with the following two lines:</p><pre><code class="lang-js"><code class="source-code prettyprint">const root = new TodoRootProperty();
const store = new Store(root);</code>
</code></pre><p>And was explained as:</p><blockquote>
<p>The <code>Store</code> obtains it from the <code>TodoRootProperty</code> instance passed into the constructor with the line:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">state = root.initialState();</code>
</code></pre>
<p><code>initialState()</code> is a <code>Property</code> method and it uses <code>TodoRootProperty.type</code> to calculate it.</p>
</blockquote><p>The initial state is computed recusively from the root until all descendents are non-objects, such as <code>null</code>, <code>undefined</code>, or a primitive. The initial state was implicitly set in the <code>createClass()</code> and <code>defineType()</code> static function calls. The third parameter to these static functions is the initial state, which receives an appropriate default if one is not explicitly passed. For example, here are the complete signatures for <code>ObjectProperty</code> static functions:</p><pre><code class="lang-js"><code class="source-code prettyprint">static createClass(shadowType={}, specCallback, initialState={})

static defineType(PropClass, ShadowType, specCallback, initialState={})</code>
</code></pre><p>Notice the initial state defaults to the empty object (<code>{}</code>).</p><p>Here is a table with the default initial states for each type:</p><table>
<thead>
<tr>
<th><code>Property</code> class</th>
<th>default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ArrayProperty</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>IndexedProperty</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>MapProperty</code></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>ObjectProperty</code></td>
<td><code>{}</code></td>
</tr>
<tr>
<td><code>PrimitiveProperty</code></td>
<td>N/A</td>
</tr>
</tbody>
</table><p>The previous step&apos;s initial state was:</p><pre><code class="lang-js"><code class="source-code prettyprint">{ todos: [] }</code>
</code></pre><h2>1. <code>UiProperty</code> <a id="uiproperty"></a></h2><p>The <code>UiProperty</code> requires the following properties and method:</p><ul>
<li><p><code>filter</code> - one of the following values where the values in parenthesis is the constant value defined in the <code>UiProperty.js</code> source file:</p>
<ul>
<li><code>all</code> - shows all items (<code>AllFilter</code>) </li>
<li><code>completed</code> - shows completed items only (<code>CompletedFilter</code>)</li>
<li><code>incomplete</code> - hides completed items (<code>IncompleteFilter</code>)</li>
</ul>
</li>
<li><p><code>sortBy</code> - one of the following values where the values in parenthesis is the constant value defined in the <code>UiProperty.js</code> source file:</p>
<ul>
<li><code>created</code> - oldest messages at the top (<code>CreatedSort</code>)</li>
<li><code>desc</code> - sorted in ascending alphabetical order (<code>DescSort</code>)</li>
<li><code>updated</code> - most recently modified/created items first (<code>UpdatedSort</code>)</li>
</ul>
</li>
<li><p><code>visibleTodos()</code> - returns the <code>todos</code> items that meet the chosen <code>filter</code> and sorted according to the <code>sortBy</code> algorithm.</p>
</li>
</ul><h3>Filters and sorters</h3><p>This section involves filtering and sorting setup and is not related to f.lux. The <code>UiProperty.js</code> file exports constants for the filtering and sorting algorithms and the sets up the algorithm functions</p><pre><code class="lang-js"><code class="source-code prettyprint">export const AllFilter = &quot;all&quot;;
export const CompletedFilter = &quot;completed&quot;;
export const IncompleteFilter = &quot;incomplete&quot;;
const DefaultFilter = AllFilter;

export const CreatedSort = &quot;created&quot;;
export const DescSort = &quot;desc&quot;;
export const UpdatedSort = &quot;updated&quot;;
const DefaultSort = CreatedSort;

/*
    Filter functions available for easy lookup.
*/
const filters = {
    [AllFilter]: t =&gt; true,
    [CompletedFilter]: t =&gt; t.completed,
    [IncompleteFilter]: t =&gt; !t.completed,
};

/*
    Sort functions available for easy lookup. Each function is setup to return incomplete items
    before completed items.
*/
const sorters = {
    [CreatedSort]: (t1, t2) =&gt; t1.completed == t2.completed ?t1.momentCreated - t2.momentCreated :t1.completed,
    [DescSort]: (t1, t2) =&gt; t1.completed == t2.completed ?t1.desc.localeCompare(t2.desc) :t1.completed,
    [UpdatedSort]: (t1, t2) =&gt; t1.completed == t2.completed ?t2.momentUpdated - t1.momentUpdated :t1.completed,
}</code>
</code></pre><p>Notice how the sorting functions sort incomplete items first followed by the selected algorithm.</p><h3><code>UiProperty</code> definition</h3><p><code>UiProperty</code> is an <code>ObjectProperty</code> with a <code>Shadow</code> subclass as the shadow api. The <code>UiProperty</code> class is not explicitly defined since the f.lux property life-cycle is not required.</p><pre><code class="lang-js"><code class="source-code prettyprint">class UiShadow extends Shadow {
    visibleTodos() {
        const { todos } = this.$().rootShadow();
        const { filter, sortBy } = this;
        const filterFn = filters[filter] || filters[DefaultFilter];
        const sortFn = sorters[sortBy] || sorters[DefaultSort];

        return todos.filter(filterFn).sort(sortFn);
    }
}


export default ObjectProperty.createClass(UiShadow, type =&gt; {
    type.properties({
                filter: PrimitiveProperty.type.initialState(DefaultFilter),
                sortBy: PrimitiveProperty.type.initialState(DefaultSort)
            })
        .readonlyOff
        .typeName(&quot;UiProperty&quot;);
});</code>
</code></pre><ul>
<li><p><code>this.$().rootShadow()</code></p>
<p>  The React UI uses the <code>UiShadow.visibleTodos()</code> method to retrieve the filtered and sorted todo items for rendering. The key f.lux related code is the <code>$().rootShadow()</code> call. This returns the <code>Store</code> managed shadow property of type <code>RootTodoProperty</code> defined in the <a href="./manual/step-2.md">previous step</a>. We then get the <code>todos</code> shadow state property and call the array methods <code>filter()</code> and <code>sort()</code>:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  const { todos } = this.$().rootShadow();

  return todos.filter(filterFn).sort(sortFn);</code>
</code></pre>
</li>
<li><p><code>const { filter, sortBy } = this</code></p>
<p>  A <code>Shadow</code> method&apos;s <code>this</code> reference points to the shadow state. We use <code>this</code> to get the <code>filter</code> and <code>sortBy</code> shadow property values, which will be native javascript strings since they are both defined using <code>PrimitiveProperty.type</code> and are initialized using string values. The <code>filter</code> and <code>sortBy</code> string values are used to lookup the appropriate callback functions:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  const filterFn = filters[filter] || filters[DefaultFilter];
  const sortFn = sorters[sortBy] || sorters[DefaultSort];

  return todos.filter(filterFn).sort(sortFn);</code>
</code></pre>
</li>
<li><p>Property initial state</p>
<p>  The <code>filter</code> and <code>sortBy</code> properties are assigned initial values using in the <code>type</code> setup callback:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  type.properties({
          filter: PrimitiveProperty.type.initialState(DefaultFilter),
          sortBy: PrimitiveProperty.type.initialState(DefaultSort)
      })</code>
</code></pre>
<p>  We will see how the initial values look in the next section.</p>
</li>
</ul><h2>2. Update <code>ToodRootProperty</code> <a id="root"></a></h2><p>The <code>UiProperty</code> is accessed via the <code>ui</code> property off the root shadow state:</p><pre><code class="lang-js"><code class="source-code prettyprint">export default ObjectProperty.createClass({}, type =&gt; {
    type.autoshadowOff                          
        .properties({
                todos: TodoListProperty.type,
                ui: UiProperty.type,             // add UiProperty to state
            })
        .readonly                               
        .typeName(&quot;TodoRootProperty&quot;);          
});</code>
</code></pre><p>And now the <code>Store</code> initial state is:</p><pre><code class="lang-js"><code class="source-code prettyprint">{
    todos: [],
    ui: {
        filter: &quot;all&quot;,
        sortBy: &quot;created&quot;
    }
}</code>
</code></pre><h2>3. <code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code> <a id="selectors"></a></h2><p>Both components are idiomatically the same so this section will focus on just one, <code>&lt;FilterSelector&gt;</code>:</p><pre><code class="lang-js"><code class="source-code prettyprint">import React from &quot;react&quot;;
import { AllFilter, CompletedFilter, IncompleteFilter } from &quot;./UiProperty&quot;;

export default function FilterSelector(props, context) {
    const { ui } = props;

    return &lt;div className=&quot;tools-selector&quot;&gt;
            &lt;span&gt;Filter:&lt;/span&gt;

            &lt;select onChange={ e =&gt; ui.filter = e.target.value }&gt;
                &lt;option value={ AllFilter }&gt;All&lt;/option&gt;
                &lt;option value={ CompletedFilter }&gt;Completed&lt;/option&gt;
                &lt;option value={ IncompleteFilter }&gt;Not Completed&lt;/option&gt;
            &lt;/select&gt;
        &lt;/div&gt;
}</code>
</code></pre><p>A few points worth calling out:</p><ul>
<li><p><code>import { AllFilter, CompletedFilter, IncompleteFilter } from &quot;./UiProperty&quot;;</code></p>
<p>  This demonstrates how f.lux introduces a natural organization to an application&apos;s structure without explicitly imposing one. Defining and exporting the filter and sorting constants from the <code>UiProperty</code> module just feels right (to me at least).</p>
</li>
</ul><ul>
<li><p><code>&lt;select onChange={ e =&gt; ui.filter = e.target.value } &gt;</code></p>
<p>  The <code>ui</code> property is the <code>UiProperty</code> shadow state property and we will see how this is obtained in the next section.</p>
<p>  Updating the <code>ui.filter</code> property uses a simple assignment in the <code>onChange()</code> event callback. The assignment will trigger an f.lux property update action followed by a store update notification to registered listeners, the <code>&lt;Todos&gt;</code> component in this application.</p>
<p>  That&apos;s it!</p>
</li>
</ul><h2>4. Update <code>&lt;Todos&gt;</code> <a id="todos"></a></h2><p>Finally, let&apos;s update the <code>&lt;Todos&gt;</code> component to show the toolbar and utilize the <code>UiProperty.visibleTodos()</code> method to get the filtered and sorted items:</p><h3>Render the toolbar</h3><p>Here is the <code>render()</code> function:</p><pre><code class="lang-js"><code class="source-code prettyprint">render() {
    const { todos, ui } = this.props.store._;
    const remainingText = `${ todos.incompleteSize } ${ pluralize(&quot;item&quot;, todos.incompleteSize ) } remaining`;

    return &lt;div className=&quot;todoContainer&quot;&gt;
            &lt;h1&gt;
                F.lux Todos &lt;small&gt;{ remainingText }&lt;/small&gt;
            &lt;/h1&gt;

            &lt;AddTodo todos={ todos } /&gt;

            { this.renderTodos() }

            &lt;div className=&quot;tools&quot;&gt;
                &lt;FilterSelector ui={ ui } /&gt;
                &lt;SortSelector ui={ ui } /&gt;
            &lt;/div&gt;
        &lt;/div&gt;
}</code>
</code></pre><p>And here are the interesting additions:</p><ul>
<li><p><code>const { todos, ui } = this.props.store._;</code></p>
<p>  The <code>ui</code> property is stored in the root shadow state.</p>
</li>
<li><p>The toolbar</p>
<p>  Just a bit of JSX that passes the <code>ui</code> shadow state property to the <code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code> components:</p>
<pre><code class="lang-jsx"><code class="source-code prettyprint">  &lt;div className=&quot;tools&quot;&gt;
      &lt;FilterSelector ui={ ui } /&gt;
      &lt;SortSelector ui={ ui } /&gt;
  &lt;/div&gt;</code>
</code></pre>
</li>
</ul><h3>Update <code>renderTodos()</code></h3><p>Filtering introduces a few additional requirements:</p><ul>
<li><strong>No visible items</strong> - the list may contain items that do not satisfy the current filter criteria, ie no completed items.</li>
<li><strong>Display properly sorted and filtered items</strong> - this is simple with our new <code>UiProperty.visibleTodos()</code> shadow method.</li>
</ul><p>And here is the updated <code>renderTodos()</code> function:</p><pre><code class="lang-jsx"><code class="source-code prettyprint">renderTodos() {
    const { todos, ui } = this.props.store._;
    const visibleTodos = ui.visibleTodos();

    if (visibleTodos.length) {
        return visibleTodos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );
    } else if (todos.length === 0) {
        return &lt;p className=&quot;noItems&quot;&gt;What do you want to do today?&lt;/p&gt;
    } else {
        return &lt;p className=&quot;noItems&quot;&gt;No items are { ui.filter }&lt;/p&gt;
    }
}</code>
</code></pre><p>And a few points explained:</p><ul>
<li><p><code>const visibleTodos = ui.visibleTodos();</code></p>
<p>  The previous step simply used the <code>todos</code> array shadow property directly and employed some inline sorting. The filtering and sorting is delegated to the <code>UiProperty</code> which maintains the filter and sorting criteria.</p>
</li>
<li><p><code>visibleTodos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; );</code>    </p>
<p>   The <code>visibleTodos</code> is mapped but each <code>&lt;TodoItem&gt;</code>. But notice the component&apos;s <code>todos</code> property:</p>
<pre><code class="lang-jsx"><code class="source-code prettyprint">   &lt;TodoItem ... todos={ todos } /&gt;</code>
</code></pre>
<p>   We still pass the <code>todos</code> array shadow property because the component needs access to the actual shadow state array for deleting the time when the &apos;x&apos; icon is pressed. The <code>ui.visibleTodos()</code> return value is a native array so will be of no use for removing an item from the store&apos;s state. This trickiness will be banished by using the <code>f.lux-react</code> module in <a href="./manual/step-4.md">next step</a>.</p>
</li>
</ul><h2>Final Thoughts</h2><p>This tutorial step covered using the f.lux shadow state for maintaining user interface state. </p><p>Important concepts covered include:</p><ul>
<li>Using <code>$().rootShadow()</code> property accessor method to access the <code>Store</code> managed root shadow object.</li>
<li>Employ f.lux state to maintain user interface state and extract data manipulation logic.</li>
</ul><h2>Next Step</h2><p><a href="./manual/step-4.md">Step 4: <code>f.lux-react</code></a></p></div>
        <a data-ice="link" href="manual/tutorial/step-3.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;&#x25A0;"><span data-ice="label-inner">Step 4: f.lux-react</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>Step 4: f.lux-react</h1><h2>Overview</h2><p>This step will will demonstrate using the <code>f.lux-react</code> module streamline access to the f.lux <code>Store</code> and its shadow state properties.</p><h2>Goals</h2><ol>
<li><a href="#user-content-provider"><code>&lt;Provider&gt;</code></a></li>
<li><a href="#user-content-addtodo"><code>&lt;AddTodo&gt;</code></a></li>
<li><a href="#user-content-todos">Simplify <code>&lt;Todos&gt;</code> Top-Level Component</a></li>
<li><a href="#user-content-header"><code>&lt;Header&gt;</code></a></li>
<li><a href="#user-content-todolist"><code>&lt;TodosList&gt;</code></a></li>
<li><a href="#user-content-toolbar"><code>&lt;Toolbar&gt;</code></a></li>
</ol><p>The <a href="https://github.com/akrumel/f.lux/tree/master/examples/tutorial/step-4"><code>examples/tutorial/step-4</code></a> directory contains the completed code for this step.</p><h2>Technical background</h2><h3><code>f.lux-react</code></h3><p>The <code>f.lux-react</code> module was inspired by the <code>redux-react</code> module for providing React bindings. Using <code>f.lux-react</code> removes the need for you to hand code:</p><ol>
<li>Registering for <code>Store</code> change notificiations</li>
<li>Passing shadow properties from the top-level component through the entire hierarchy</li>
</ol><p><code>f.lux-react</code> contains components and functions to:</p><ul>
<li>Install the <code>Store</code> on the <a href="https://facebook.github.io/react/docs/context.html">React context</a></li>
<li>Create container components for extracting and passing <code>Store</code> shadow state values as component properties</li>
<li>Form component support for easily interfacing data entry components with f.lux properties</li>
</ul><p>This tutorial step will utilize the following <code>f.lux-module</code> exports:</p><ul>
<li><p><code>&lt;Provider&gt;</code></p>
<p>  An application top-level component that places the <code>Store</code> on the React context. <code>&lt;Provder&gt;</code> expects a single property:</p>
<ul>
<li><code>store</code> - the application f.lux <code>Store</code></li>
</ul>
</li>
</ul><ul>
<li><p><code>storeContainer()</code></p>
<p>  Connects a React component to the f.lux <code>Store</code>. This method takes a number of parameters used to configure how the container component&apos;s sets up properties for your component. It actually returns a function that takes your component and returns the container component to use in your application. </p>
<p>  <code>storeContainer()</code> is a complex function but we are going to use it in a simple manner and just pass it a single parameter:</p>
<ul>
<li><p><code>mapShadowToProps</code> </p>
<p>  Extracts values from the f.lux store&apos;s shadow state and returns them as a javascript object. The object will be merged with the component&apos;s props and set on your component. <code>mapShadowToProps()</code> is a function of the form:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">  function callback(shadow, props, store) : stateProps</code>
</code></pre>
<p>Here is an example used in this tutorial step:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">function mapShadowToProps(shadow) {
  return {
      todos: shadow.todos,
  }
}

export default storeContainer(mapShadowToProps)(AddTodo);</code>
</code></pre>
<p>Explanation:</p>
</li>
<li><p><code>function mapShadowToProps(shadow) {...}
  The</code>mapShadowToProps()<code>function is called when a store change notification is received to get the latest shadow state based props. This implementation returns an object with a single</code>todos` property.</p>
</li>
<li><p><code>storeContainer(mapShadowToProps)</code>
  Generates a factory function that takes your React component as its sole parameter to return the f.lux connected component</p>
</li>
<li><p><code>(AddTodo)</code>
  Uses the function returned by <code>storeContainer()</code> to create the f.lux connected component</p>
</li>
</ul>
</li>
</ul><pre><code><code class="source-code prettyprint">This will be shortened in the application to:

```js
export default storeContainer( shadow =&gt; ({ todos: shadow.todos }) )(AddTodo);
```</code>
</code></pre><h2>1. <code>&lt;Provider&gt;</code> <a id="provider"></a></h2><p>Using the <code>&lt;Provider&gt;</code> component to place your <code>Store</code> instance on the React context is straight-forward. Here is the pertitent code in <code>main.js</code>:</p><pre><code class="lang-jsx"><code class="source-code prettyprint">import { Provider } from &quot;f.lux-react&quot;;

ReactDOM.render(
    &lt;Provider store={ store }&gt;
        &lt;Todos/&gt;
    &lt;/Provider&gt;,
    document.getElementById(&apos;react-ui&apos;)
);</code>
</code></pre><p>Essentially, we just wrapped the application&apos;s top-level component, <code>&lt;Todos&gt;</code>, in a <code>&lt;Provider&gt;</code>.</p><h2>2. <code>&lt;AddTodo&gt;</code> <a id="addtodo"></a></h2><p>The <code>&lt;AddTodo&gt;</code> component expects a <code>todos</code> prop that contains a reference to the <code>todos</code> shadow state property. Previously, this was passed by the <code>&lt;Todos&gt;</code> component. We can use <code>storeContainer()</code> instead:</p><pre><code class="lang-jsx"><code class="source-code prettyprint">class AddTodo extends Component { ... }

export default storeContainer( shadow =&gt; ({ todos: shadow.todos }) )(AddTodo);</code>
</code></pre><p>No <code>&lt;AddTodo&gt;</code> changes are required since the f.lux connected component is exported and used in <code>&lt;Todos&gt;</code> as shown in the next section.</p><h2>3. Simplify <code>&lt;Todos&gt;</code> Top-Level Component <a id="todos"></a></h2><p>Refactoring the other components allows for <code>&lt;Todos&gt;</code> to be greatly simplified. Previous versions contains the code to register/unregister from the f.lux store. In fact, we are also going to extract the header, item list, and toolbar into separate components yeilding a simple functional component: </p><pre><code class="lang-jsx"><code class="source-code prettyprint">import React from &quot;react&quot;;

import AddTodo from &quot;./AddTodo.react&quot;;
import Header from &quot;./Header.react&quot;;
import TodoList from &quot;./TodoList.react&quot;;
import Toolbar from &quot;./Toolbar.react&quot;;


export default function Todos(props, context) {
    return &lt;div className=&quot;todoContainer&quot;&gt;
            &lt;Header /&gt;

            &lt;AddTodo /&gt;
            &lt;TodoList /&gt;

            &lt;Toolbar /&gt;
        &lt;/div&gt;
}</code>
</code></pre><p>Notice how the top-level <code>&lt;Todos&gt;</code> component no longer references the <code>store</code> prop. The following sections will discuss the new components: <code>&lt;Header&gt;</code>, <code>&lt;TodoList&gt;</code>, and <code>&lt;Toolbar&gt;</code>.</p><h2>4. <code>&lt;Header&gt;</code> <a id="header"></a></h2><p>The application header is an <code>&lt;h1&gt;</code> tag that shows the number of incomplete items. The code is extracted from the <code>&lt;Todos&gt; render()</code> function and placed in the <code>&lt;Header&gt;</code> functional component:</p><pre><code class="lang-jsx"><code class="source-code prettyprint">import pluralize from &quot;pluralize&quot;;
import React from &quot;react&quot;;

import { storeContainer } from &quot;f.lux-react&quot;;


function Header(props, context) {
    const { todos } = props;
    const remainingText = `${ todos.incompleteSize } ${ pluralize(&quot;item&quot;, todos.incompleteSize ) } remaining`;

    return &lt;h1&gt;
            F.lux Todos &lt;small&gt;{ remainingText }&lt;/small&gt;
        &lt;/h1&gt;
}


export default storeContainer( shadow =&gt; ({ todos: shadow.todos }) )(Header);</code>
</code></pre><h2>5. <code>&lt;TodosList&gt;</code> <a id="todolist"></a></h2><p>The previous steps rendered the todo items from the <code>&lt;Todo&gt; renderTodos()</code> method. This becomes another simple functional component:</p><pre><code class="lang-jsx"><code class="source-code prettyprint">import React from &quot;react&quot;;

import { storeContainer } from &quot;f.lux-react&quot;;

import TodoItem from &quot;./TodoItem.react&quot;;


function TodoList(props, context) {
    const { todos, ui } = props;
    const visibleTodos = ui.visibleTodos();

    if (todos.length === 0) {
        return &lt;p className=&quot;noItems&quot;&gt;What do you want to do today?&lt;/p&gt;
    } else if (visibleTodos.length === 0) {
        return &lt;p className=&quot;noItems&quot;&gt;No items are { ui.filter }&lt;/p&gt;
    }

    return &lt;div&gt;
        {
            visibleTodos.map( t =&gt; &lt;TodoItem key={ t.$().pid() } todo={ t } todos={ todos } /&gt; )
        }
        &lt;/div&gt;
}


export default storeContainer( shadow =&gt; shadow )(TodoList);</code>
</code></pre><p>The one wrinkle here is the <code>mapStateToProps()</code> function:</p><pre><code class="lang-js"><code class="source-code prettyprint">shadow =&gt; shadow</code>
</code></pre><p><code>storeContainer()</code> will merge the object with the explicitly set component props with the result being the <code>shadow.todos</code> and <code>shadow.ui</code> properties will be passed as <code>todos</code> and <code>ui</code> props. You would not usually want all of the shadow root state child properties passed as props but things are pretty simple here. The component then obtains references to <code>todos</code> and <code>ui</code>:</p><pre><code class="lang-js"><code class="source-code prettyprint">const { todos, ui } = props;</code>
</code></pre><h2>6. <code>&lt;Toolbar&gt;</code> <a id="toolbar"></a></h2><p>You do not wrap every component using <code>storeContainer()</code> because that introduces unnecessary overhead. The goal is to strike a balance between manually passing the store and/or shadow state through the entire hieararchy and wrapping every component. Toolbar demonstrats getting the <code>ui</code> shadow state property using <code>storeContainer()</code> and then passing it to the <code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code>.</p><pre><code class="lang-jsx"><code class="source-code prettyprint">import React from &quot;react&quot;;

import { storeContainer } from &quot;f.lux-react&quot;;

import FilterSelector from &quot;./FilterSelector.react&quot;;
import SortSelector from &quot;./SortSelector.react&quot;;


function Toolbar(props, context) {
    const { ui } = props;

    return &lt;div className=&quot;tools&quot;&gt;
            &lt;FilterSelector ui={ ui } /&gt;
            &lt;SortSelector ui={ ui } /&gt;
        &lt;/div&gt;
}


export default storeContainer( shadow =&gt; ({ ui: shadow.ui }) )(Toolbar);</code>
</code></pre><p>No changes are required for <code>&lt;FilterSelector&gt;</code> and <code>&lt;SortSelector&gt;</code> to continue functioning as in the <a href="./manual/step-3.md">previous step</a>.</p><h2>Final Thoughts</h2><p>This tutorial step covered using the <code>f.lux-react</code> module to simplify the application&apos;s React components.</p><p>Important concepts include:</p><ul>
<li><code>&lt;Provider&gt;</code> - application top-level React component puts the <code>Store</code> on the context</li>
<li><code>storeContainer(mapShadowToProps)</code> - creates a higher order component to provide desired shadow state values as component properties.</li>
</ul><h2>Next Step</h2><p><a href="./manual/step-5.md">Step 5: Time travel debugger</a></p></div>
        <a data-ice="link" href="manual/tutorial/step-4.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-tutorial" data-section-count="&#x25A0;&#x25A0;"><span data-ice="label-inner">Step 5: Time Travel Debugger</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>Step 5: Time Travel Debugger</h1><h2>Overview</h2><p>This step will will explore using the f.lux time travel debugger and experiment with the shadow state from javascript console. </p><h2>Goals</h2><ol>
<li><a href="#user-content-logger">Setting up the f.lux <code>Logger</code></a></li>
<li><a href="#user-content-logging">Logging</a></li>
<li><a href="#user-content-timetravel">Time travel</a></li>
<li><a href="#user-content-fun">Fun with shadow properties</a></li>
</ol><p>The <a href="https://github.com/akrumel/f.lux/tree/master/examples/tutorial/step-4"><code>examples/tutorial/step-5</code></a> directory contains the completed code for this step.</p><h2>1. Setting up the f.lux <code>Logger</code> <a id="logger"></a></h2><p>The <code>Store</code> class has a low-level api for tracking state change actions. F.lux ships with the <code>Logger</code> class that uses this low-level listener api for logging state changes and supporting time travel debugging. </p><p>We make a small change to <code>main.js</code> to enable the <code>Logger</code>:</p><pre><code class="lang-js"><code class="source-code prettyprint">import {
    Store,
    Logger as FluxLogger
} from &quot;f.lux&quot;;


const root = new TodoRootProperty();
const store = new Store(root);

// add logger as a listener - avaible in console as &apos;flog&apos;. Example usage: &apos;flog.print&apos;
const logger = new FluxLogger(store);
store.addListener(logger);</code>
</code></pre><p>Running the application in the browser will cause the following to be printed to the console:</p><pre><code><code class="source-code prettyprint">f.lux logger commands:
    back          - moves backward in time by one store state frame
    clear         - removes all logs
    forward       - moves forward in time by one store state frame
    help          - f.lux logger commands
    index         - active index of store state frames
    maxFrames     - # of store updates to cache (default=50)
    next          - alias for &apos;forward&apos;
    print         - print logs to console
    printNoState  - print logs to console without state objects
    size          - # of store state frames available
    store         - gets the f.lux store

Functions:
    clearTrap(name)                    - clears a trap set by &apos;setTrap()&apos;
    goto(idx)                          - move to a specific store state frame
    setMaxFrames(maxFrames)            - set the maximum number of store states to maintain (default=50)
    setTrap(cond, value, name=uuid)    - sets a debugger trap and returns name. condition argument may be
                                         a function taking next state or a string path to get a value
    tail(count=10, printState=true)    - prints last &apos;count&apos; store updates


f.lux log available at window.flog</code>
</code></pre><p>We will explore many of these commands for the remainder of this step.</p><h2>2. Logging <a id="logging"></a></h2><p>Let&apos;s explore the logging commands. Open your browser&apos;s javascript console and type the following commands at the prompt.</p><ol>
<li><p><code>flog.print</code></p>
<p> Prints all state changes stored in the log. Running this command immediately after the application launches look the following once the <code>Object</code> is expanded:</p>
<p> <img src="./manual/assets/step-5.2.1.png" alt="Initial state"></p>
<p> This describes the starting f.lux store state. </p>
<ul>
<li><code>ID</code> - a log frame identifier</li>
<li><code>active=true</code> - used for time travel debugging. The <code>true</code> means this frame represents the current f.lux store state.</li>
<li><code>completed=...</code> - the timestamp for when the state change occurred. The first frame will show the timestamp and subsequent onces will print the time since the previous frame</li>
<li><code>final state</code> - the actual f.lux store state (not shadow state)</li>
</ul>
</li>
<li><p>Create a todo item and make a one character change. I created an item with &quot;ski&quot; as the description and added a &apos;!&apos; to the end. </p>
<p> Type <code>flog.print</code> and you should see output similar to this:    </p>
<p> <img src="./manual/assets/step-5.2.2.png" alt="Initial state"></p>
<p> Now there are 3 frame:</p>
<ul>
<li><code>ID=1</code> - the initial frame</li>
<li><code>ID=2</code> - <code>todos::push()</code> was the action and you can inspect the starting and ending property state for <code>todos</code>.</li>
<li><code>ID=3</code> - the actions are shown ordered by the dotted path, ie &apos;todos.0&apos; and &apos;todos.0.desc&apos;. The two actions are to set the <code>desc</code> property and the <code>updated</code> timestamp property.</li>
</ul>
</li>
<li><p><code>flog.maxFrames</code></p>
<p> Command will print the number of log frames to maintain. The default is 50.</p>
</li>
<li><p><code>flog.size</code></p>
<p> Command prints the number of log frames available.</p>
</li>
<li><p>Create some todo items and make some edits to increase the number of log frames.</p>
</li>
<li><p><code>flog.tail(5)</code></p>
<p> The <code>tail(count=10)</code> will print the end of the log. This command is a function unlike the previous property type commands. The default is to print 10 frames. <code>flog.print</code> always prints the entire log.</p>
</li>
<li><p><code>flog.store._.todos.length</code></p>
<p> The <code>flog.store</code> commands gets the f.lux store and <code>_</code> is the root shadow state. So this command gets the length of the <code>todos</code> shadow property. </p>
<p> You could also use <code>flog.store.shadow</code> if you prefer more typing. Btw, the choice of the &apos;_&apos; for accessing the shadow state was chosen because it &quot;looks&quot; like a shadow on the ground, right?</p>
</li>
<li><p><code>flog.clear</code></p>
<p> Clears all log frames. Can be handy when you want to track some activity since all log data will relate to the activity of interest.</p>
</li>
</ol><h2>3. Time travel <a id="timetravel"></a></h2><p>Time travel debugging is the ability to move back and forth between f.lux store state. Time travel debugging along with hot reloading can form a productive UI development environment. This section will simply explore the time travel commands and not perform any actual debugging tasks.</p><p>Make sure you have some todo items and have made a few edits so you <code>flog.size</code> shows between 5 - 10. This will give us enough for time travelling but still be manageable.</p><ol>
<li><p><code>flog.printNoState</code></p>
<p> This prints all the log frames, like <code>flog.print</code>, without the state objects. This makes for a smaller output. Here is my console screenshot:</p>
<p> <img src="./manual/assets/step-5.3.2.png" alt="Console screenshot"></p>
<p> Notice the last frame has <code>active=true</code> indicating it is the f.lux store&apos;s current state.</p>
</li>
<li><p><code>flog.goto(0)</code></p>
<p> This will reset the f.lux store to the state of the first log frame. You should see the UI revert to this state.</p>
<p> <img src="./manual/assets/step-5.3.3.png" alt="Console screenshot"></p>
<p> And now the first log frame show <code>active=true</code>.</p>
</li>
<li><p><code>flog.next</code></p>
<p> Moves the next log frame and you should see the ui update. </p>
</li>
<li><p><code>flog.back</code></p>
<p> Moves to the previous log frame.</p>
</li>
<li><p><code>flog.index</code></p>
<p> Prints the current log frame index, ie <code>active=true</code>.</p>
</li>
<li><p><code>flog.goto(flog.size - 1)</code></p>
<p> Goes to the last log frame.</p>
</li>
</ol><h2>4. Fun with shadow properties <a id="fun"></a></h2><p>Working with the f.lux store shadow state can be a handy way to debug problems or just get a better understanding of f.lux.</p><ol>
<li><p>Refresh the browser so you have no todo items.</p>
</li>
<li><p><code>flog.store._.todos.addTodo(&quot;Hello&quot;)</code></p>
<p> You should see a todo item in the UI with the description &quot;Hello&quot;. We accessed the <code>todos</code> shadow array, <code>TodosListProperty</code> type, and invoked the <code>addTodo()</code> method we defined in <a href="./manual/step-2.md#user-content-todos">Step 2: Properties</a>.</p>
</li>
<li><p><code>flog.store._.todos[0].completed = true</code></p>
<p> And we just marked our new todo item as completed. You should the item marked in the application.</p>
</li>
<li><p><code>flog.store._.todos</code></p>
<p> Prints out:</p>
<pre><code class="lang-js"><code class="source-code prettyprint"> CustomShadow {__state__: Array[2], Symbol(impl): IndexedShadowImpl, Symbol(_cache): Object}</code>
</code></pre>
<p> Yep, not a real array. But what is the property type that backs the shadow?</p>
</li>
<li><p><code>flog.store._.todos.$$()</code></p>
<p> Remember the <code>$$()</code> shadow method returns the <code>Property</code> instance. In this case, the console will print:</p>
<pre><code class="lang-js"><code class="source-code prettyprint"> CustomProperty {_indexed: IndexedApi, Symbol(pid): 3, ...}</code>
</code></pre>
</li>
<li><p><code>flog.store._.todos.$$().typeName()</code></p>
<p> We are invoking the <code>Property.typeName()</code> method to get the <code>typeName</code> value set on the <code>TodoListProperty.type</code> descriptor. </p>
<pre><code class="lang-js"><code class="source-code prettyprint"> export default IndexedProperty.createClass(TodoListShadow, type =&gt; {
     type.elementType(TodoProperty.type)    // each model contained will be a TodoProperty type
         .typeName(&quot;TodoListProperty&quot;)      // useful for diagnostics
 });</code>
</code></pre>
<p> And sure enough, the console outputs <code>TodoListProperty</code>.</p>
</li>
<li><p><code>flog.store._.todos.$$().stateType()</code></p>
<p> This gets the actual <code>StateType</code> instance used to shadow the <code>todos</code> state.</p>
</li>
<li><p><code>flog.store._.todos = []</code></p>
<p> The console will output <code>[]</code> but the ui will not change. And running the command </p>
<pre><code class="lang-js"><code class="source-code prettyprint"> flog.store._.todos.toJSON()

 &gt; [Object]</code>
</code></pre>
<p> shows there is still a single object in the array.</p>
</li>
<li><p><code>flog.store._.todos.map( t =&gt; ``${t.desc}, ${t.updated}`` )</code></p>
<p> We are using the <code>Array.map()</code> method to print out information about all the todo items.</p>
</li>
</ol><h2>Final Thoughts</h2><p>This tutorial step covered setting up the f.lux <code>Logger</code> and using it to track state changs and time travel. We also messed around on the javascript console to manipulate the shadow state manually. </p></div>
        <a data-ice="link" href="manual/tutorial/step-5.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-reference" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;&#x25A0;"><span data-ice="label-inner">References</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>References</h1>
<div data-ice="classSummary"><h2 id="class">Class Summary</h2><table class="summary" data-ice="summary">
  <thead><tr><td data-ice="title" colspan="3">Static Public Class Summary</td></tr></thead>
  <tbody>
  
  <tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Access.js~Access.html">Access</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/ArrayProperty.js~ArrayProperty.html">ArrayProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/ArrayShadow.js~ArrayShadow.html">ArrayShadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/AutoShader.js~AutoShader.html">AutoShader</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/CollectionProperty.js~CollectionProperty.html">CollectionProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/CollectionShadow.js~CollectionShadow.html">CollectionShadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/listeners/Logger.js~FrameAction.html">FrameAction</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/IndexedApi.js~IndexedApi.html">IndexedApi</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/IndexedProperty.js~IndexedProperty.html">IndexedProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/IndexedShadow.js~IndexedShadow.html">IndexedShadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/KeyedApi.js~KeyedApi.html">KeyedApi</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/listeners/Logger.js~LogFrame.html">LogFrame</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/listeners/Logger.js~Logger.html">Logger</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/MapProperty.js~MapProperty.html">MapProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/MapShadow.js~MapShadow.html">MapShadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/ModelAccess.js~ModelAccess.html">ModelAccess</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/ModelProperty.js~ModelProperty.html">ModelProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/ObjectProperty.js~ObjectProperty.html">ObjectProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>A generic object property type that supports keyed child properties.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/PojoEndpointProperty.js~PojoEndpointProperty.html">PojoEndpointProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/PojoQueryBuilder.js~PojoQueryBuilder.html">PojoQueryBuilder</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/PrimitiveProperty.js~PrimitiveProperty.html">PrimitiveProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/PrimitiveShadowImpl.js~PrimitiveShadowImpl.html">PrimitiveShadowImpl</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Property.js~Property.html">Property</a></span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>Base class for custom f.lux properties.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/PropertyFactoryShader.js~PropertyFactoryShader.html">PropertyFactoryShader</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/RestEndpointProperty.js~RestEndpointProperty.html">RestEndpointProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/RestQueryBuilder.js~RestQueryBuilder.html">RestQueryBuilder</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Shader.js~Shader.html">Shader</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Shadow.js~Shadow.html">Shadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/ShadowImpl.js~ShadowImpl.html">ShadowImpl</a></span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>Todo: reduce memory footprint:
1) investigate _time and _previousTime really needed
2) investigate getting access from property (reduce object creation and memory footprint)</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/collection/ShadowModelAccess.js~ShadowModelAccess.html">ShadowModelAccess</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/StateType.js~StateType.html">StateType</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Store.js~Store.html">Store</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/TransientProperty.js~TransientLock.html">TransientLock</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/TransientProperty.js~TransientProperty.html">TransientProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/TransientProperty.js~TransientShadow.html">TransientShadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Transients.js~TransientsProperty.html">TransientsProperty</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="class/src/Transients.js~TransientsShadow.html">TransientsShadow</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
</tbody>
</table>
</div>

<div data-ice="functionSummary"><h2 id="function">Function Summary</h2><table class="summary" data-ice="summary">
  <thead><tr><td data-ice="title" colspan="3">Static Public Function Summary</td></tr></thead>
  <tbody>
  
  <tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-automount">automount</a></span></span><span data-ice="signature">(target: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-createConsoleLogger">createConsoleLogger</a></span></span><span data-ice="signature">(logger: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-createObject">createObject</a></span></span><span data-ice="signature">(ctor: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-createPropertyClass">createPropertyClass</a></span></span><span data-ice="signature">(shadowType: <span>*</span>, initialState: <span>*</span>, specCallback: <span>*</span>, PropertyClass: <span>*</span>, BaseShadowClass: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-devDebug">devDebug</a></span></span><span data-ice="signature">(modname: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-extendOptions">extendOptions</a></span></span><span data-ice="signature">(options: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-extendProperty">extendProperty</a></span></span><span data-ice="signature">(property: <span>*</span>, impl: <span>*</span>, shadow: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-getOptions">getOptions</a></span></span><span data-ice="signature">(method: <span>*</span>, options: ...<span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-isShadow">isShadow</a></span></span><span data-ice="signature">(obj: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-mixin">mixin</a></span></span><span data-ice="signature">(mixinFactory: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-modelize">modelize</a></span></span><span data-ice="signature">(values: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-noParentStateErrorMsg">noParentStateErrorMsg</a></span></span><span data-ice="signature">(name: <span>*</span>, parentImpl: <span>*</span>): <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-reshadow">reshadow</a></span></span><span data-ice="signature">(time: <span>*</span>, parentState: <span>*</span>, prevImpl: <span>*</span>, parentImpl: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-setOptions">setOptions</a></span></span><span data-ice="signature">(options: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-shadow">shadow</a></span></span><span data-ice="signature">(target: <span>*</span>, name: <span>*</span>, descriptor: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-shadowBound">shadowBound</a></span></span><span data-ice="signature">(target: <span>*</span>, name: <span>*</span>, descriptor: <span>*</span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-shadowProperty">shadowProperty</a></span></span><span data-ice="signature">(time: <span>*</span>, ImplClass: <span>*</span>, property: <span>*</span>, name: <span>*</span>, state: <span>*</span>, parent: <span>*</span>, shader: <span>*</span>): <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>Function used by shaders to instantiate shadow implementation classes, subclasses of ShadowImpl.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="function/index.html#static-function-shadowPropertyHelper">shadowPropertyHelper</a></span></span><span data-ice="signature">(target: <span>*</span>, name: <span>*</span>, descriptor: <span>*</span>, bindProperty: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean">boolean</a></span>)</span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
</tbody>
</table>
</div>
<div data-ice="variableSummary"><h2 id="variable">Variable Summary</h2><table class="summary" data-ice="summary">
  <thead><tr><td data-ice="title" colspan="3">Static Public Variable Summary</td></tr></thead>
  <tbody>
  
  <tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-AllKey">AllKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-AllOp">AllOp</a></span></span><span data-ice="signature">: <span><span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></span><span>[]</span></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-ChangeEvent">ChangeEvent</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-CollectionAllKey">CollectionAllKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-CollectionPojoEndpointPropertyKey">CollectionPojoEndpointPropertyKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-CollectionPropertyKey">CollectionPropertyKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-CollectionRestEndpointPropertyKey">CollectionRestEndpointPropertyKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-CreateOp">CreateOp</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-DEFAULTS_OPTION">DEFAULTS_OPTION</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-DeletedEvent">DeletedEvent</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-DestroyOp">DestroyOp</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-ErrorEvent">ErrorEvent</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-FetchOp">FetchOp</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-FetchedEvent">FetchedEvent</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-FindOp">FindOp</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-FoundEvent">FoundEvent</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-MERGE_OPTION">MERGE_OPTION</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-NONE_OPTION">NONE_OPTION</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-REPLACE_OPTION">REPLACE_OPTION</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-SavedEvent">SavedEvent</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-ShadowImplKey">ShadowImplKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-StoreKey">StoreKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-TransientKey">TransientKey</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-UpdateOp">UpdateOp</a></span></span><span data-ice="signature">: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-error">error</a></span></span><span data-ice="signature">: <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-info">info</a></span></span><span data-ice="signature">: <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
          
          
          <span data-ice="name"><span><a href="variable/index.html#static-variable-warn">warn</a></span></span><span data-ice="signature">: <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
</tbody>
</table>
</div>


</div>
        <a data-ice="link" href="identifiers.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <h1 data-ice="label" class="manual-color manual-color-changelog" data-section-count="&#x25A0;&#x25A0;&#x25A0;&#x25A0;"><span data-ice="label-inner">v1.0.0 Change Log</span></h1>
      <div class="manual-card">
        <div data-ice="card"><h1>v1.0.0 Change Log</h1><h2>Goals</h2><p>This release aims to standardize library&apos;s property creation methodology.</p><ul>
<li>[x] Standardize on StateType use instead of mixing with explicit property creation parameters</li>
<li>[x] Allow property class specType to be specialized</li>
<li>[x] Add Collection support for specType</li>
<li>[x] Add Collection endpoint support for stubbed data (PojoEndpointProperty)</li>
<li>[x] Collection todo example</li>
<li>[x] Remove stateSpec references (rely on type mechanism)</li>
<li>[x] Remove KeyedProperty, StateTypes, and createXyzPropertyType() functions</li>
<li>[x] Create IndexedApi class to mirror KeyedApi</li>
<li>[x] Basic todo example</li>
<li>[ ] Tutorial based on todo example</li>
<li>[ ] Unit tests: AutoShader, Property, PropertyFactoryShader, Shader, StateType, Store</li>
<li>[ ] Reduce memory footprint of ShadowImpl</li>
</ul><h2>Documentation</h2><ul>
<li>Overview document</li>
<li>Tutorial under development</li>
</ul><h2>Changes</h2><h3>Libraries</h3><ul>
<li>(uuid)[<a href="https://github.com/kelektiv/node-uuid">https://github.com/kelektiv/node-uuid</a>]</li>
</ul><h3>ArrayProperty</h3><ul>
<li><code>createClass(shadowType={}, specCallback, initialState=[])</code> signature changed</li>
</ul><h3>IndexedProperty</h3><ul>
<li>Constructor takes single argument of <code>StateType</code></li>
<li><code>createClass(shadowType={}, specCallback, initialState=[])</code> signature changed</li>
</ul><h3>IndexedShadowImpl</h3><ul>
<li>Fixed <code>remove()</code> bug where state improperly set</li>
<li>Fix f<code>ilter()</code> bug where undefined variable <code>v</code> was being used instead of this[i]</li>
<li>Use <code>ShadowImpl.switchNames()</code> while remapping</li>
</ul><h3>MapProperty</h3><ul>
<li><code>createClass(shadowType={}, specCallback, initialState=[])</code> signature changed</li>
</ul><h3>ObjectProperty</h3><ul>
<li>Constructor takes single argument of <code>StateType</code></li>
<li>Use <code>ObjectShadowImpl</code></li>
<li><code>createClass(shadowType={}, specCallback, initialState=[])</code> signature changed</li>
</ul><h3>Property</h3><ul>
<li>Constructor takes single argument of <code>StateType</code>. If one not passed as parameter then default located in the property&apos;s prototype chain.</li>
</ul><h3>PropertyFactoryShader</h3><ul>
<li>Constructor signature: <code>constructor(stateType, parent)</code></li>
<li>Replaed s<code>etElementClass()</code> with <code>setElementType(stateType)</code></li>
<li><code>addStateType()</code> -&gt; <code>addProperty(name, stateType)</code></li>
<li><code>addPropertyClass()</code> removed</li>
</ul><h3>Shader</h3><ul>
<li><code>addStateType()</code> -&gt; <code>addProperty(name, stateType)</code></li>
<li><code>addPropertyClass()</code> removed</li>
</ul><h3>StateType</h3><ul>
<li><code>computeInitialState()</code> now non-static and no arguments</li>
<li><code>shadowClassForProperty(defaultClass=Shadow)</code> signature changed and no longer static</li>
<li><code>initialStateWithDefaults(state)</code> signature changed and no longer static</li>
<li><code>from(prop)</code> static method to walk the prototype hieararchy looking for a <code>StateType</code> instance on the constructor: stateSpec or type properties in that order</li>
</ul><h3>ShadowImpl</h3><ul>
<li><code>switchNames()</code> added to move <code>_nextName</code> to <code>_name</code> to be used during property remapping</li>
</ul><h3>createPropertyClass()</h3><ul>
<li>Signature changed: <code>createPropertyClass(shadowType, initialState, specCallback, PropertyClass, BaseShadowClass=Shadow)</code></li>
</ul><h3>Examples</h3><ul>
<li>Todo basic example</li>
<li>Todo with Collections</li>
<li>Tutorial step examples</li>
</ul></div>
        <a data-ice="link" href="manual/changelog/v1.0.0.html"></a>
      </div>
    </div>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
